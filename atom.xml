<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>糜家智の博客</title>
  
  
  <link href="https://miren123.gitee.io/atom.xml" rel="self"/>
  
  <link href="https://miren123.gitee.io/"/>
  <updated>2023-06-18T13:49:50.938Z</updated>
  <id>https://miren123.gitee.io/</id>
  
  <author>
    <name>Mi JiaZhi</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://miren123.gitee.io/cljwyh1qj00195kwfcjh08u5j/"/>
    <id>https://miren123.gitee.io/cljwyh1qj00195kwfcjh08u5j/</id>
    <published>2023-06-17T16:00:00.000Z</published>
    <updated>2023-06-18T13:49:50.938Z</updated>
    
    <content type="html"><![CDATA[<p><span class='p logo center large'>ColorUI 使用文档</span><span class='p center small logo'>全网最全 ColorUI 使用文档</span></p><br><p>本文档并非是官方文档，而是本人自己经常使用 Color UI，但是又找不到一个满意的文档，不如自己搭建一个文档，自己使用方便的同时也方便大家使用。</p><br><span class='btn solid large center'><a class="button" href='https://miren123.gitee.io/colorui-document/' title='快速开始'><i class='fad fa-flag'></i>快速开始</a></span><br>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;
&lt;span class=&#39;p logo center large&#39;&gt;ColorUI 使用文档&lt;/span&gt;
&lt;span class=&#39;p center small logo&#39;&gt;全网最全 ColorUI 使用文档&lt;/span&gt;
&lt;/p&gt;
&lt;br&gt;

&lt;p&gt;本文档并非是官方文</summary>
      
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/uni-app/"/>
    
    
  </entry>
  
  <entry>
    <title>uniapp封装request</title>
    <link href="https://miren123.gitee.io/cljwyh1qm001j5kwfcsukeakc/"/>
    <id>https://miren123.gitee.io/cljwyh1qm001j5kwfcsukeakc/</id>
    <published>2023-06-17T16:00:00.000Z</published>
    <updated>2023-06-18T14:01:33.636Z</updated>
    
    <content type="html"><![CDATA[<p>uniapp封装request 的学习指南</p><span id="more"></span><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>只要是前端，不管什么框架和语言，都避免不了和服务端请求数据，以下是uniapp提供的API<code>uni.request</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">uni.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://www.example.com/request&#x27;</span>, <span class="comment">//仅为示例，并非真实接口地址。</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;uni.request&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;custom-header&#x27;</span>: <span class="string">&#x27;hello&#x27;</span> <span class="comment">//自定义请求头信息</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">text</span> = <span class="string">&#x27;request success&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>为了提高开发效率，封装可以使开发过程更加的酣畅淋漓。</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>一般选择在外面的根目录下，创建<code>utils</code>文件夹，<code>utils</code>文件夹下创建<code>http.js</code>和<code>request.js</code></p><ul><li><code>utils/http.js</code></li><li><code>utils/request.js</code></li></ul><h4 id="request-js"><a href="#request-js" class="headerlink" title="request.js"></a><code>request.js</code></h4><blockquote><p>封装request请求的文件</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">&quot;@/config&quot;</span>;  <span class="comment">// 配置文件</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&quot;./storage&quot;</span>; <span class="comment">// 缓存封装</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">console</span>(<span class="params">options</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(config.<span class="property">debug</span>)&#123;</span><br><span class="line">            <span class="comment">// console.log(&quot;&lt;&lt;===============================================&gt;&gt;&quot;);</span></span><br><span class="line">            <span class="comment">// console.log(&quot;request start&quot;);</span></span><br><span class="line">            <span class="comment">// console.log(&quot;header&quot; + JSON.stringify(options.header));</span></span><br><span class="line">            <span class="comment">// console.log(&quot;method: &quot; + options.method + &quot; URL: &quot; + options.url);</span></span><br><span class="line">            <span class="comment">// console.log(options.data);</span></span><br><span class="line">            <span class="comment">// console.log(&quot;request end&quot;);</span></span><br><span class="line">            <span class="comment">// console.log(&quot;&lt;&lt;===============================================&gt;&gt;&quot;);</span></span><br><span class="line">        &#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">domain</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> config.<span class="property">uni_app_web_api_url</span>.<span class="title function_">replace</span>(<span class="string">&quot;api&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">send</span>(<span class="params">options=&#123;&#125;</span>)&#123;</span><br><span class="line">        <span class="comment">// loading加载</span></span><br><span class="line">        uni.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">           <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 拼接路劲，下面的配置文件会提到</span></span><br><span class="line">        options.<span class="property">url</span> = config.<span class="property">uni_app_web_api_url</span> + <span class="string">&#x27;&#x27;</span> + options.<span class="property">url</span>;</span><br><span class="line">        <span class="comment">// 请求方式</span></span><br><span class="line">        options.<span class="property">method</span> = options.<span class="property">method</span> || <span class="string">&quot;GET&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 这里看项目的情况来定，如果是没有token，那就删除这里，上面的storage也不需要引入</span></span><br><span class="line">        <span class="keyword">let</span> users = storage.<span class="title function_">getJson</span>(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(users != <span class="literal">null</span>)&#123;</span><br><span class="line">            options.<span class="property">header</span> = &#123; <span class="string">&quot;Auth-Token&quot;</span> : users.<span class="property">token</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">console</span>(options);  <span class="comment">// 打印请求数据，调试用，上线可以注释</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 发起Promise请求</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">            uni.<span class="title function_">request</span>(options).<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">var</span> [error, res] = data;</span><br><span class="line">                <span class="keyword">if</span>(error != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="title function_">reject</span>(error);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">// 相应拦截、根据后端的状态码来写，可以自行判断和封装</span></span><br><span class="line">                    <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">status</span> == <span class="string">&#x27;-1001&#x27;</span>)&#123;</span><br><span class="line">                        uni.<span class="title function_">hideLoading</span>();</span><br><span class="line">                        uni.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">                            <span class="attr">url</span>: <span class="string">&#x27;/pages/Login/login/login&#x27;</span></span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(res.<span class="property">data</span>); </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">url=<span class="string">&quot;&quot;</span>,data=&#123;&#125;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">send</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">data</span>: data</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">post</span>(<span class="params">url=<span class="string">&quot;&quot;</span>,data=&#123;&#125;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">send</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">data</span>: data,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>平时用的多的主要还是<code>get</code>和<code>post</code>，因此就封装了两个，如果还有更多的，可以把里面的内容单独提取出来，然后再定义<code>put</code>、<code>delete</code>等方法</li></ul><h4 id="http-js"><a href="#http-js" class="headerlink" title="http.js"></a><code>http.js</code></h4><blockquote><p>封装的<code>api</code>接口</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// get请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getBannerList</span>(<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        request.<span class="title function_">get</span>(<span class="string">&quot;/banner/getList&quot;</span>, params).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(result)</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// post请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addBanner</span>(<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        request.<span class="title function_">post</span>(<span class="string">&quot;/banner/add&quot;</span>, params).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(result);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果说比较懒，或者是不想这么麻烦，也可直接用这两个，调用的时候第一个参数换成接口地址即可</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">httpGet</span>(<span class="params">url, params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">      request.<span class="title function_">get</span>(url, params).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="title function_">resolve</span>(result)</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">          <span class="title function_">reject</span>(err)</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">httpPost</span>(<span class="params">url, params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">      request.<span class="title function_">post</span>(url, params).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="title function_">resolve</span>(result)</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">          <span class="title function_">reject</span>(err)</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实际使用"><a href="#实际使用" class="headerlink" title="实际使用"></a>实际使用</h3><blockquote><p>在页面使用</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">bannerList</span>: [],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">loadData</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">loadData</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$http</span></span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">getBannerList</span>()</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 根据后端接口的情况，如果需要自己拼接，则自行拼接，不需要则删除</span></span></span><br><span class="line"><span class="language-javascript">            res.<span class="property">banner</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              val = <span class="variable language_">this</span>.<span class="property">$config</span>.<span class="property">uni_app_web_url</span> + val;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">bannerList</span> = res.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">              </span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 提示网络错误</span></span></span><br><span class="line"><span class="language-javascript">            uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">title</span>: <span class="string">&quot;网络错误，请重试~&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&quot;none&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">duration</span>: <span class="number">2000</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>以下还有几个配置文件，磨刀不误砍柴工，都可以放在<code>utils</code>目录下</li></ul><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h4 id="config-js"><a href="#config-js" class="headerlink" title="config.js"></a><code>config.js</code></h4><blockquote><p>此文件放在根目录，和<code>main.js</code>同级即可</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">web_name</span>: <span class="string">&quot;网站名称&quot;</span>, </span><br><span class="line">    </span><br><span class="line">    <span class="attr">uni_app_web_url</span>: <span class="string">&quot;http://baidu.com/&quot;</span>, <span class="comment">// h5域名PC域名，用于分享图片或者拼接图片时使用，结尾必须加 “/”</span></span><br><span class="line">    <span class="attr">uni_app_web_api_url</span>: <span class="string">&quot;http://baidu.com/api&quot;</span>, <span class="comment">// 请求接口的地址</span></span><br><span class="line">    </span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="storage-js"><a href="#storage-js" class="headerlink" title="storage.js"></a><code>storage.js</code></h4><blockquote><p>缓存封装，一些需要用的数据，可以放进去，类似token，语言，主题之类的。</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">set</span>(<span class="params">name,value</span>)&#123;</span><br><span class="line">        uni.<span class="title function_">setStorageSync</span>(name,value);</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">setJson</span>(<span class="params">name,value</span>)&#123;</span><br><span class="line">        uni.<span class="title function_">setStorageSync</span>(name,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value));</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">get</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> uni.<span class="title function_">getStorageSync</span>(name);</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">getJson</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> content = uni.<span class="title function_">getStorageSync</span>(name);</span><br><span class="line">        <span class="keyword">if</span>(!content)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(content);</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        uni.<span class="title function_">removeStorageSync</span>(name);</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">clear</span>(<span class="params"></span>)&#123;</span><br><span class="line">        uni.<span class="title function_">clearStorageSync</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a><code>main.js</code></h4><blockquote><p>这是根目录下的<code>main.js</code></p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> http <span class="keyword">from</span> <span class="string">&#x27;./utils/http&#x27;</span> <span class="comment">// http请求接口</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> utils <span class="keyword">from</span> <span class="string">&#x27;./utils/utils&#x27;</span> <span class="comment">// 工具文件</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> common <span class="keyword">from</span> <span class="string">&#x27;./utils/common&#x27;</span> <span class="comment">// 公共文件</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span> <span class="comment">// vuex，不需要的可以自行删除</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;utils/storage&#x27;</span> <span class="comment">// 缓存文件</span></span><br><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">&#x27;@/config&#x27;</span> <span class="comment">// 配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义全局</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$store</span> = store</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$storage</span> = storage</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = http</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$utils</span> = utils</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$common</span> = common</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$config</span> = config</span><br><span class="line"></span><br><span class="line"><span class="title class_">App</span>.<span class="property">mpType</span> = <span class="string">&#x27;app&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    ...<span class="title class_">App</span></span><br><span class="line">&#125;)</span><br><span class="line">app.$mount()</span><br></pre></td></tr></table></figure><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><h4 id="utils-js"><a href="#utils-js" class="headerlink" title="utils.js"></a><code>utils.js</code></h4><blockquote><p>很多可以公共使用的方法，为你准备好了</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">msg</span>(<span class="params">content,time=<span class="number">3000</span></span>)&#123;</span><br><span class="line">    uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">icon</span>:<span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">        <span class="attr">title</span>: content,</span><br><span class="line">        <span class="attr">duration</span>: time</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">showLoading</span>(<span class="params">content=<span class="string">&quot;加载数据中...&quot;</span>,mask=<span class="literal">true</span></span>)&#123;</span><br><span class="line">    uni.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: content,</span><br><span class="line">        <span class="attr">mask</span>: mask</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">hideLoading</span>(<span class="params">timer=<span class="number">0</span></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(timer &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> t = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            uni.<span class="title function_">hideLoading</span>();</span><br><span class="line">            <span class="built_in">clearTimeout</span>(t);</span><br><span class="line">        &#125;, timer);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        uni.<span class="title function_">hideLoading</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">in_array</span>(<span class="params">search,array</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> array)&#123;</span><br><span class="line">        <span class="keyword">if</span>(array[i]==search)&#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isDataType</span>(<span class="params">data,type</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(data) === <span class="string">&#x27;[object &#x27;</span>+type+<span class="string">&#x27;]&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ltrim</span>(<span class="params">str,char</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> pos = str.<span class="title function_">indexOf</span>(char);</span><br><span class="line">    <span class="keyword">let</span> sonstr = str.<span class="title function_">substr</span>(pos+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> sonstr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">rtrim</span>(<span class="params">str,char</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> pos = str.<span class="title function_">lastIndexOf</span>(char);</span><br><span class="line">    <span class="keyword">let</span> sonstr = str.<span class="title function_">substr</span>(<span class="number">0</span>,pos);</span><br><span class="line">    <span class="keyword">return</span> sonstr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保留当前页面，跳转到应用内的某个页面，使用uni.navigateBack可以返回到原页面。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">navigateTo</span>(<span class="params">url,params</span>)&#123;</span><br><span class="line">    uni.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="title function_">parseUrl</span>(url,params)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭当前页面，跳转到应用内的某个页面。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">redirectTo</span>(<span class="params">url,params</span>)&#123;</span><br><span class="line">    uni.<span class="title function_">redirectTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="title function_">parseUrl</span>(url,params)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭所有页面，打开到应用内的某个页面。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">reLaunch</span>(<span class="params">url,params</span>)&#123;</span><br><span class="line">    uni.<span class="title function_">reLaunch</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="title function_">parseUrl</span>(url,params)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">switchTab</span>(<span class="params">url,params</span>)&#123;</span><br><span class="line">    uni.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="title function_">parseUrl</span>(url,params)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭当前页面，返回上一页面或多级页面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">navigateBack</span>(<span class="params">delta</span>)&#123;</span><br><span class="line">    uni.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">        <span class="attr">delta</span>: delta</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 预加载页面，是一种性能优化技术。被预载的页面，在打开时速度更快。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">preloadPage</span>(<span class="params">url, params</span>)&#123;</span><br><span class="line">    uni.<span class="title function_">preloadPage</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="title function_">parseUrl</span>(url,params)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">prePage</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> pages = <span class="title function_">getCurrentPages</span>();</span><br><span class="line">    <span class="keyword">let</span> prePage = pages[pages.<span class="property">length</span> - <span class="number">2</span>];</span><br><span class="line">    <span class="comment">// #ifdef H5</span></span><br><span class="line">    <span class="keyword">return</span> prePage;</span><br><span class="line">    <span class="comment">// #endif</span></span><br><span class="line">    <span class="keyword">return</span> prePage.<span class="property">$vm</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * rpx转px</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> int|float num</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">rpx2px</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="comment">// const info = uni.getSystemInfoSync()</span></span><br><span class="line">    <span class="comment">// let scale = 750 / info.windowWidth;</span></span><br><span class="line">    <span class="comment">// return (Number.isNaN(parseFloat(num)) ? 0 : parseFloat(num)) / scale;</span></span><br><span class="line">    <span class="keyword">return</span> uni.<span class="title function_">upx2px</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> int|float num</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">px2rpx</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> num/(uni.<span class="title function_">upx2px</span>(num)/num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取窗口的宽高</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getSystemInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> info = uni.<span class="title function_">getSystemInfoSync</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">w</span>: info.<span class="property">windowWidth</span>,</span><br><span class="line">        <span class="attr">h</span>: info.<span class="property">windowHeight</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：路由解析并且拼接</span></span><br><span class="line"><span class="comment"> * 使用：parseUrl(&#x27;home&#x27;, &#123;id:1,type: &#x27;add&#x27;&#125;)</span></span><br><span class="line"><span class="comment"> * 得到：&#x27;/pages/home?id=1&amp;type=add&#x27;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">parseUrl</span>(<span class="params">url,params</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    <span class="keyword">let</span> string = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> params)&#123;</span><br><span class="line">        arr.<span class="title function_">push</span>(i + <span class="string">&quot;=&quot;</span> + params[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    string = <span class="string">&quot;/pages/&quot;</span> + url;</span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="property">length</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        string += <span class="string">&quot;?&quot;</span> + arr.<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>使用</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$utils</span>.<span class="title function_">msg</span>(<span class="string">&quot;消息提示&quot;</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$utils</span>.<span class="title function_">navigateTo</span>(<span class="string">&quot;login&quot;</span>) <span class="comment">// 页面跳转</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="store-index-js"><a href="#store-index-js" class="headerlink" title="store/index.js"></a><code>store/index.js</code></h4><blockquote><p>根目录下创建<code>store</code>，里面的<code>index.js</code>，这里参考<code>vuex</code></p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;../common/storage&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="comment">// 属性值</span></span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">users</span>: storage.<span class="title function_">getJson</span>(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 对外方问state属性内容</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        <span class="attr">getCart</span>: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> users = storage.<span class="title function_">getJson</span>(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(users == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> users.<span class="property">shop_count</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Mutation 必须是同步函数</span></span><br><span class="line">    <span class="comment">// 更改state属性内容</span></span><br><span class="line">    <span class="comment">// 使用：this.$store.commit(&quot;setUserInfo&quot;,&#123;  &#125;);</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">UPDATEUSERS</span>(<span class="params">state, data</span>)&#123;</span><br><span class="line">            state.<span class="property">users</span> = data;</span><br><span class="line">            storage.<span class="title function_">setJson</span>(<span class="string">&quot;users&quot;</span>,data);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">DELETEUSERS</span>(<span class="params">state,name</span>)&#123;</span><br><span class="line">            state.<span class="property">users</span> = <span class="literal">null</span>;</span><br><span class="line">            storage.<span class="title function_">remove</span>(name);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">UPDATECART</span>(<span class="params">state, data</span>)&#123;</span><br><span class="line">            state.<span class="property">users</span>.<span class="property">shop_count</span> = data;</span><br><span class="line">            <span class="keyword">let</span> users = storage.<span class="title function_">getJson</span>(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">            users.<span class="property">shop_count</span> = data;</span><br><span class="line">            storage.<span class="title function_">setJson</span>(<span class="string">&quot;users&quot;</span>,users);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Action 可以包含任意异步操作</span></span><br><span class="line">    <span class="comment">// 通过 context.commit 可以方问mutations方法</span></span><br><span class="line">    <span class="comment">// 也可以获得getters内容</span></span><br><span class="line">    <span class="comment">// 通过 this.$store.dispatch(&quot;getUser&quot;) 来取得内容</span></span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">getCart</span>(<span class="params">context</span>)&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">usersStatus</span>(<span class="params">context</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(storage.<span class="title function_">getJson</span>(<span class="string">&quot;users&quot;</span>) == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="title function_">reject</span>();</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="title function_">resolve</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><ul><li>参考vuex使用方式</li></ul><p>这是比较全面的文件，大家可以根据自己的情况来引入文件，如果只是单单的接口请求，那就上面的几个文件，扩展文件不用即可。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;uniapp封装request 的学习指南&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/uni-app/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/tags/uni-app/"/>
    
  </entry>
  
  <entry>
    <title>uniapp 内使用 mescroll</title>
    <link href="https://miren123.gitee.io/cljwyh1ql001g5kwf44iq942v/"/>
    <id>https://miren123.gitee.io/cljwyh1ql001g5kwf44iq942v/</id>
    <published>2023-05-27T16:00:00.000Z</published>
    <updated>2023-06-18T14:27:23.737Z</updated>
    
    <content type="html"><![CDATA[<p>在使用uniapp开发项目的过程中，在很多场景里都需要下拉刷新和上拉加载，而 <code>mescroll.js</code> 则是一个非常精致的下拉刷新和上拉加载 js 框架。</p><p>官网地址：<a href="http://www.mescroll.com/" target="_blank" rel="noopener external nofollow noreferrer">mescroll</a></p><span id="more"></span><div class="story post-story"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><code>mescroll.js</code> 是在 H5端 运行的下拉刷新和上拉加载插件，时代变化太快, 作者已转向维护 mescroll 的 uni 版本了</p><ol><li><p>mescroll的uni版本, 是专门用在uni-app的下拉刷新和上拉加载的组件, 支持一套代码编译到iOS、Android、H5、小程序等多个平台</p></li><li><p>mescroll的uni版本, 继承了mescroll.js的实用功能: 自动处理分页, 自动控制无数据, 空布局提示, 回到顶部按钮 ..</p></li><li><p>mescroll的uni版本, 丰富的案例, 自由灵活的api, 超详细的注释, 可让您快速自定义真正属于自己的下拉上拉组件</p></li><li><p>mescroll的uni版本, 提供<mescroll-body>和<mescroll-uni>两个组件, 其中<mescroll-body>支持配置成系统自带的下拉组件</p></li><li><p><mescroll-body>是1.2.1版本新增的组件, 用来填补<mescroll-uni>的不足 :</p></li></ol><table><thead><tr><th>对比项</th><th>mescroll-uni</th><th>mescroll-body</th><th>系统自带的下拉组件</th></tr></thead><tbody><tr><td>本质</td><td>scroll-view的滚动</td><td>原生页的滚动</td><td>原生页的滚动</td></tr><tr><td>是否支持自定义UI</td><td>是</td><td>是</td><td>x</td></tr><tr><td>是否支持上拉翻页加载</td><td>是</td><td>是</td><td>x</td></tr><tr><td>支持配置空布局,回到顶部按钮</td><td>是</td><td>是</td><td>x</td></tr><tr><td>支持动态开启&#x2F;禁止下拉功能</td><td>是</td><td>是</td><td>仅APP端可以</td></tr><tr><td>支持设置下拉区域出现的位置</td><td>是</td><td>是</td><td>仅APP端可以</td></tr><tr><td>支持局部区域滚动 (如嵌在弹窗,浮层中)</td><td>是</td><td>x</td><td>x</td></tr><tr><td>数据不满屏,仍可上拉翻页加载</td><td>是</td><td>x</td><td>x</td></tr><tr><td>不必固定高度</td><td>x</td><td>是</td><td>是</td></tr><tr><td>不必配置pages.json</td><td>x</td><td>是</td><td>x</td></tr><tr><td>可写入 原生组件, 如video,map,canvas</td><td>x</td><td>是</td><td>是</td></tr><tr><td>支持titleNView的transparent透明渐变</td><td>x</td><td>是</td><td>是</td></tr><tr><td>超长的复杂的列表是否卡顿 (性能)</td><td>低端机型会卡顿</td><td>流畅</td><td>流畅</td></tr><tr><td>总结</td><td>从1.2.1版本开始 绝大部分情况应优先考虑使用 <code>mescroll-body</code> 因为支持原生组件,且性能好 只有当需要局部区域滚动 (如嵌在弹窗,浮层,swiper中), 才考虑 <code>mescroll-uni</code></td><td></td><td></td></tr></tbody></table></div><div class="story post-story"><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ol><li><a href="https://ext.dcloud.net.cn/plugin?id=343" target="_blank" rel="noopener external nofollow noreferrer">插件市场</a>, 点击右侧的&quot;使用HBuilderX导入插件&quot;按钮</li><li>下载示例, 找到合适的示例, 搬运代码(砖头), 比看文档快多啦</li></ol><h3 id="mescroll-body"><a href="#mescroll-body" class="headerlink" title="mescroll-body :"></a>mescroll-body :</h3><ol><li>无需配置pages.json (检查是否配置了多余的属性):</li></ol><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;path&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;pages/xxx/xxx&quot;</span><span class="punctuation">,</span> <span class="comment">// 在具体的页面中, mescroll-body 无需像 mescroll-uni 那样需要配置 pages.json</span></span><br><span class="line">   <span class="attr">&quot;style&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;navigationBarTitleText&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;backgroundColorTop&quot;</span><span class="punctuation">:</span><span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span> <span class="comment">// iOS下拉bounce回弹区域的颜色 (与down.bgColor同步)</span></span><br><span class="line">        <span class="attr">&quot;backgroundColorBottom&quot;</span><span class="punctuation">:</span><span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span> <span class="comment">// iOS上拉bounce回弹区域的颜色 (与up.bgColor同步)</span></span><br><span class="line">        <span class="attr">&quot;disableScroll&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="comment">//删除此项: mescroll-body必须允许原生页面滚动, 默认false</span></span><br><span class="line">        <span class="attr">&quot;enablePullDownRefresh&quot;</span> <span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="comment">//删除此项: 不开启系统自带的下拉刷新, 默认false</span></span><br><span class="line">        <span class="attr">&quot;app-plus&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;bounce&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;none&quot;</span> <span class="comment">//可选: 是否禁止iOS回弹和Android触顶触底的弧形阴影, 默认允许 (可配在 &#x27;globalStyle&#x27;)</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;mp-alipay&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;allowsBounceVertical&quot;</span><span class="punctuation">:</span><span class="string">&quot;NO&quot;</span><span class="punctuation">&#125;</span> <span class="comment">//可选: 取消支付宝和钉钉小程序的iOS回弹 (可配在 &#x27;globalStyle&#x27;)</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;globalStyle&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;backgroundColorTop&quot;</span><span class="punctuation">:</span><span class="string">&quot;#FFFFFF&quot;</span> <span class="comment">// iOS APP真机bounce回弹区域默认灰色,建议统一重置为白色</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">            </span><br></pre></td></tr></table></figure><ol start="2"><li>在具体页面中的示例 (vue2) :</li></ol><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mescroll-body</span> @<span class="attr">init</span>=<span class="string">&quot;mescrollInit&quot;</span> @<span class="attr">down</span>=<span class="string">&quot;downCallback&quot;</span> @<span class="attr">up</span>=<span class="string">&quot;upCallback&quot;</span> <span class="attr">:down</span>=<span class="string">&quot;downOption&quot;</span> <span class="attr">:up</span>=<span class="string">&quot;upOption&quot;</span>&gt;</span></span><br><span class="line">     //  @init=&quot;mescrollInit&quot; @down=&quot;downCallback&quot; @up=&quot;upCallback&quot;为固定值,不可删改(与mescroll-mixins保持一致) </span><br><span class="line">     // :down=&quot;downOption&quot; :up=&quot;upOption&quot; 绝大部分情况无需配置 </span><br><span class="line">     // :top=&quot;顶部偏移量&quot; :bottom=&quot;底部偏移量&quot; :topbar=&quot;状态栏&quot; :safearea=&quot;安全区&quot; (常用)</span><br><span class="line">     // 此处支持写入原生组件 </span><br><span class="line">     <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;data in dataList&quot;</span>&gt;</span> 数据列表... <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mescroll-body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">view</span>&gt;</span>fixed元素需写在mescroll-body的外面,否则下拉刷新时会降级为absolute <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 引入mescroll-mixins.js</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">MescrollMixin</span> <span class="keyword">from</span> <span class="string">&quot;@/uni_modules/mescroll-uni/components/mescroll-uni/mescroll-mixins.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">MescrollMixin</span> <span class="keyword">from</span> <span class="string">&quot;@/components/mescroll-uni/mescroll-mixins.js&quot;</span>; <span class="comment">// 非uni_modules版本</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">MescrollBody</span> <span class="keyword">from</span> <span class="string">&quot;@/components/mescroll-uni/mescroll-body.vue&quot;</span>; <span class="comment">// 非uni_modules版本</span></span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">mixins</span>: [<span class="title class_">MescrollMixin</span>], <span class="comment">// 使用mixin</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">MescrollBody</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">mescroll</span>: <span class="literal">null</span>, <span class="comment">// mescroll实例对象 (此行可删,mixins已默认)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 下拉刷新的配置(可选, 绝大部分情况无需配置)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">downOption</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    ...</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 上拉加载的配置(可选, 绝大部分情况无需配置)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">upOption</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">page</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">size</span>: <span class="number">10</span> <span class="comment">// 每页数据的数量,默认10</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">noMoreSize</span>: <span class="number">5</span>, <span class="comment">// 配置列表的总数量要大于等于5条才显示&#x27;-- END --&#x27;的提示</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">empty</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">tip</span>: <span class="string">&#x27;暂无相关数据&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 列表数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataList</span>: []</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*mescroll组件初始化的回调,可获取到mescroll对象 (此处可删,mixins已默认)*/</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">mescrollInit</span>(<span class="params">mescroll</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">mescroll</span> = mescroll;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*下拉刷新的回调, 重置列表为第一页 (此处可删,mixins已默认)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            downCallback()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                this.mescroll.resetUpScroll();</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            /*上拉加载的回调*/</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">upCallback</span>(<span class="params">page</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 此处可以继续请求其他接口</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// if(page.num == 1)&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// // 请求其他接口...</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 如果希望先请求其他接口,再触发upCallback,可参考以下写法</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// if(!this.isInitxx)&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// apiGetxx().then(res=&gt;&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// this.isInitxx = true</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// this.mescroll.resetUpScroll() // 重新触发upCallback</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;).catch(()=&gt;&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// this.mescroll.endErr()</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// return // 此处return,先获取xx</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> pageNum = page.<span class="property">num</span>; <span class="comment">// 页码, 默认从1开始</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> pageSize = page.<span class="property">size</span>; <span class="comment">// 页长, 默认每页10条</span></span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&#x27;xxxx?pageNum=&#x27;</span>+pageNum+<span class="string">&#x27;&amp;pageSize=&#x27;</span>+pageSize,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 接口返回的当前页数据列表 (数组)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> curPageData = data.<span class="property">xxx</span>; </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 接口返回的当前页数据长度 (如列表有26个数据,当前页返回8个,则curPageLen=8)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> curPageLen = curPageData.<span class="property">length</span>; </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 接口返回的总页数 (如列表有26个数据,每页10条,共3页; 则totalPage=3)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> totalPage = data.<span class="property">xxx</span>; </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 接口返回的总数据量(如列表有26个数据,每页10条,共3页; 则totalSize=26)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> totalSize = data.<span class="property">xxx</span>; </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 接口返回的是否有下一页 (true/false)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> hasNext = data.<span class="property">xxx</span>; </span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//设置列表数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(page.<span class="property">num</span> == <span class="number">1</span>) <span class="variable language_">this</span>.<span class="property">dataList</span> = []; <span class="comment">//如果是第一页需手动置空列表</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">dataList</span> = <span class="variable language_">this</span>.<span class="property">dataList</span>.<span class="title function_">concat</span>(curPageData); <span class="comment">//追加新数据</span></span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 请求成功,隐藏加载状态</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//方法一(推荐): 后台接口有返回列表的总页数 totalPage</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">mescroll</span>.<span class="title function_">endByPage</span>(curPageLen, totalPage); </span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//方法二(推荐): 后台接口有返回列表的总数据量 totalSize</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//this.mescroll.endBySize(curPageLen, totalSize); </span></span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//方法三(推荐): 您有其他方式知道是否有下一页 hasNext</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//this.mescroll.endSuccess(curPageLen, hasNext); </span></span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//方法四 (不推荐),会存在一个小问题:比如列表共有20条数据,每页加载10条,共2页.</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//如果只根据当前页的数据个数判断,则需翻到第三页才会知道无更多数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//如果传了hasNext,则翻到第二页即可显示无更多数据.</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//this.mescroll.endSuccess(curPageLen);</span></span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 如果数据较复杂,可等到渲染完成之后再隐藏下拉加载状态: 如</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 建议使用setTimeout,因为this.$nextTick某些情况某些机型不触发</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">mescroll</span>.<span class="title function_">endSuccess</span>(curPageLen)</span></span><br><span class="line"><span class="language-javascript">                        &#125;,<span class="number">20</span>)</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 上拉加载的 curPageLen 必传, 否则会一直显示&#x27;加载中...&#x27;:</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="number">1.</span> 使配置的noMoreSize 和 empty生效</span></span><br><span class="line"><span class="language-javascript">                        <span class="number">2.</span> 判断是否有下一页的首要依据: </span></span><br><span class="line"><span class="language-javascript">                           当传的值小于page.<span class="property">size</span>时(说明不满页了),则一定会认为无更多数据;</span></span><br><span class="line"><span class="language-javascript">                           比传入的totalPage, totalSize, hasNext具有更高的判断优先级;</span></span><br><span class="line"><span class="language-javascript">                        <span class="number">3.</span> 当传的值等于page.<span class="property">size</span>时(满页),才取totalPage, totalSize, hasNext判断是否有下一页</span></span><br><span class="line"><span class="language-javascript">                        传totalPage, totalSize, hasNext目的是避免方法四描述的小问题</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 提示: 您无需额外维护页码和判断显示空布局,mescroll已自动处理好.</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 当您发现结果和预期不一样时, 建议再认真检查以上参数是否传正确</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">fail</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//  请求失败,隐藏加载状态</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">mescroll</span>.<span class="title function_">endErr</span>()</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*若希望重新加载列表,只需调用此方法即可(内部会自动page.num=1,再主动触发up.callback)*/</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">reloadList</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">mescroll</span>.<span class="title function_">resetUpScroll</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>     </span><br></pre></td></tr></table></figure><ol start="3"><li>在具体页面中的示例 (vue3) :</li></ol><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mescroll-body</span> @<span class="attr">init</span>=<span class="string">&quot;mescrollInit&quot;</span> @<span class="attr">down</span>=<span class="string">&quot;downCallback&quot;</span> @<span class="attr">up</span>=<span class="string">&quot;upCallback&quot;</span>&gt;</span></span><br><span class="line">    // mescroll的极简示例,大部分情况就是这么用</span><br><span class="line">    <span class="tag">&lt;/<span class="name">mescroll-body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; onPageScroll, onReachBottom &#125; <span class="keyword">from</span> <span class="string">&#x27;@dcloudio/uni-app&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> useMescroll <span class="keyword">from</span> <span class="string">&quot;@/uni_modules/mescroll-uni/hooks/useMescroll.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;apiGoods&#125; <span class="keyword">from</span> <span class="string">&quot;@/api/mock.js&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 数据列表</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> goods = <span class="title function_">ref</span>([]) </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 调用mescroll的hook (注: mescroll-uni不用传onPageScroll,onReachBottom, 而mescroll-body必传)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; mescrollInit, downCallback &#125; = <span class="title function_">useMescroll</span>(onPageScroll, onReachBottom) </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 上拉加载的回调: 其中num:当前页 从1开始, size:每页数据条数,默认10</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">upCallback</span> = (<span class="params">mescroll</span>)=&gt;&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">apiGoods</span>(mescroll.<span class="property">num</span>, mescroll.<span class="property">size</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> curPageData = res.<span class="property">list</span> || [] <span class="comment">// 当前页数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(mescroll.<span class="property">num</span> == <span class="number">1</span>) goods.<span class="property">value</span> = []; <span class="comment">// 第一页需手动制空列表</span></span></span><br><span class="line"><span class="language-javascript">            goods.<span class="property">value</span> = goods.<span class="property">value</span>.<span class="title function_">concat</span>(curPageData); <span class="comment">//追加新数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//联网成功的回调,隐藏下拉刷新和上拉加载的状态;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//mescroll会根据传的参数,自动判断列表如果无任何数据,则提示空;列表无下一页数据,则提示无更多数据;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//方法一(推荐): 后台接口有返回列表的总页数 totalPage</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//mescroll.endByPage(curPageData.length, totalPage); //必传参数(当前页的数据个数, 总页数)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//方法二(推荐): 后台接口有返回列表的总数据量 totalSize</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//mescroll.endBySize(curPageData.length, totalSize); //必传参数(当前页的数据个数, 总数据量)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//方法三(推荐): 您有其他方式知道是否有下一页 hasNext</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//mescroll.endSuccess(curPageData.length, hasNext); //必传参数(当前页的数据个数, 是否有下一页true/false)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//方法四 (不推荐),会存在一个小问题:比如列表共有20条数据,每页加载10条,共2页.如果只根据当前页的数据个数判断,则需翻到第三页才会知道无更多数据.</span></span></span><br><span class="line"><span class="language-javascript">            mescroll.<span class="title function_">endSuccess</span>(curPageData.<span class="property">length</span>); <span class="comment">// 请求成功, 结束加载</span></span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            mescroll.<span class="title function_">endErr</span>(); <span class="comment">// 请求失败, 结束加载</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="mescroll-uni"><a href="#mescroll-uni" class="headerlink" title="mescroll-uni :"></a>mescroll-uni :</h3><ol><li>需要配置 pages.json :</li></ol><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;pages/xxx/xxx&quot;</span><span class="punctuation">,</span> <span class="comment">// 在具体的页面中, mescroll-uni 需要配置 pages.json, 而mescroll-body不需要</span></span><br><span class="line">    <span class="attr">&quot;style&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;navigationBarTitleText&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;enablePullDownRefresh&quot;</span> <span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="comment">// 删除此项: 不开启系统自带的下拉刷新, 默认false</span></span><br><span class="line">        <span class="attr">&quot;disableScroll&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="comment">// 删除此项, 否则页面无法滚动</span></span><br><span class="line">        <span class="attr">&quot;app-plus&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;bounce&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;none&quot;</span> <span class="comment">// 取消APP端iOS回弹,避免与下拉刷新冲突 (可统一配在 &#x27;globalStyle&#x27;)</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;mp-alipay&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;allowsBounceVertical&quot;</span><span class="punctuation">:</span><span class="string">&quot;NO&quot;</span><span class="punctuation">&#125;</span> <span class="comment">// 取消支付宝和钉钉小程序的iOS回弹,避免与下拉刷新冲突 (可统一配在 &#x27;globalStyle&#x27;)</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span>    </span><br></pre></td></tr></table></figure><ol start="2"><li>在具体页面中的示例 :</li></ol><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mescroll-uni</span> @<span class="attr">init</span>=<span class="string">&quot;mescrollInit&quot;</span> @<span class="attr">down</span>=<span class="string">&quot;downCallback&quot;</span> @<span class="attr">up</span>=<span class="string">&quot;upCallback&quot;</span> <span class="attr">:down</span>=<span class="string">&quot;downOption&quot;</span> <span class="attr">:up</span>=<span class="string">&quot;upOption&quot;</span> &gt;</span></span><br><span class="line">        // 此处除了不能写原生组件,其他的与 mescroll-body 的一致 &gt; </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mescroll-uni</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>原生组件和fixed元素需写在mescroll-uni的外面,否则滚动列表时会抖动 <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 与 mescroll-body 的一致 &gt; </span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>                    </span><br></pre></td></tr></table></figure><h3 id="效果图（loading样式可以自定义）"><a href="#效果图（loading样式可以自定义）" class="headerlink" title="效果图（loading样式可以自定义）"></a>效果图（loading样式可以自定义）</h3><p><strong>上拉效果</strong><br><img src="https://img-blog.csdnimg.cn/00f61d77eab6440cb07e7e89eb7f6f6d.gif" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/00f61d77eab6440cb07e7e89eb7f6f6d.gif" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" width="40%"></p><p><strong>下拉效果</strong><br><img src="https://img-blog.csdnimg.cn/f2a15d1e84b84384acb9ee71b2a64971.gif" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/f2a15d1e84b84384acb9ee71b2a64971.gif" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" width="40%"></p><h3 id="参数配置"><a href="#参数配置" class="headerlink" title="参数配置"></a>参数配置</h3><p><code>mescroll</code> 的配置可以使得页面样式变得多样化，更多配置可以去官网看一下。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">downOption</span>: &#123;</span><br><span class="line">    <span class="attr">use</span>: <span class="literal">true</span>, <span class="comment">// 是否启用下拉刷新; 默认true</span></span><br><span class="line">    <span class="attr">auto</span>: <span class="literal">true</span>, <span class="comment">// 是否在初始化完毕之后自动执行下拉刷新的回调; 默认true</span></span><br><span class="line">    <span class="attr">native</span>: <span class="literal">false</span>, <span class="comment">// 是否使用系统自带的下拉刷新; 默认false; 仅mescroll-body生效 (值为true时,还需在pages配置enablePullDownRefresh:true;详请参考mescroll-native的案例)</span></span><br><span class="line">    <span class="attr">autoShowLoading</span>: <span class="literal">false</span>, <span class="comment">// 如果设置auto=true(在初始化完毕之后自动执行下拉刷新的回调),那么是否显示下拉刷新的进度; 默认false</span></span><br><span class="line">    <span class="attr">isLock</span>: <span class="literal">false</span>, <span class="comment">// 是否锁定下拉刷新,默认false;</span></span><br><span class="line">    <span class="attr">offset</span>: <span class="number">60</span>, <span class="comment">// 在列表顶部,下拉大于80upx,松手即可触发下拉刷新的回调</span></span><br><span class="line">    <span class="attr">inOffsetRate</span>: <span class="number">1</span>, <span class="comment">// 在列表顶部,下拉的距离小于offset时,改变下拉区域高度比例;值小于1且越接近0,高度变化越小,表现为越往下越难拉</span></span><br><span class="line">    <span class="attr">outOffsetRate</span>: <span class="number">0.2</span>, <span class="comment">// 在列表顶部,下拉的距离大于offset时,改变下拉区域高度比例;值小于1且越接近0,高度变化越小,表现为越往下越难拉</span></span><br><span class="line">    <span class="attr">bottomOffset</span>: <span class="number">20</span>, <span class="comment">// 当手指touchmove位置在距离body底部20upx范围内的时候结束上拉刷新,避免Webview嵌套导致touchend事件不执行</span></span><br><span class="line">    <span class="attr">minAngle</span>: <span class="number">45</span>, <span class="comment">// 向下滑动最少偏移的角度,取值区间  [0,90];默认45度,即向下滑动的角度大于45度则触发下拉;而小于45度,将不触发下拉,避免与左右滑动的轮播等组件冲突;</span></span><br><span class="line">    <span class="attr">bgColor</span>: <span class="string">&quot;#E75A7C&quot;</span>, <span class="comment">// 背景颜色 (建议在pages.json中再设置一下backgroundColorTop)</span></span><br><span class="line">    <span class="attr">textColor</span>: <span class="string">&quot;#fff&quot;</span>, <span class="comment">// 文本颜色 (当bgColor配置了颜色,而textColor未配置时,则textColor会默认为白色)</span></span><br><span class="line">    <span class="attr">textInOffset</span>: <span class="string">&quot;下拉刷新&quot;</span>, <span class="comment">// 下拉的距离在offset范围内的提示文本</span></span><br><span class="line">    <span class="attr">textOutOffset</span>: <span class="string">&quot;释放更新&quot;</span>, <span class="comment">// 下拉的距离大于offset范围的提示文本</span></span><br><span class="line">    <span class="attr">textLoading</span>: <span class="string">&quot;蒋皓洁稍等加载中 ...&quot;</span>, <span class="comment">// 加载中的提示文本</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">upOption</span>: &#123;</span><br><span class="line">    <span class="attr">use</span>: <span class="literal">true</span>, <span class="comment">// 是否启用上拉加载; 默认true</span></span><br><span class="line">    <span class="attr">auto</span>: <span class="literal">true</span>, <span class="comment">// 是否在初始化完毕之后自动执行上拉加载的回调; 默认true</span></span><br><span class="line">    <span class="attr">isLock</span>: <span class="literal">false</span>, <span class="comment">// 是否锁定上拉加载,默认false;</span></span><br><span class="line">    <span class="attr">isBoth</span>: <span class="literal">true</span>, <span class="comment">// 上拉加载时,如果滑动到列表顶部是否可以同时触发下拉刷新;默认true,两者可同时触发;</span></span><br><span class="line">    <span class="attr">page</span>: &#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="number">0</span>, <span class="comment">// 当前页码,默认0,回调之前会加1,即callback(page)会从1开始</span></span><br><span class="line">      <span class="attr">size</span>: <span class="number">10</span>, <span class="comment">// 每页数据的数量</span></span><br><span class="line">      <span class="attr">time</span>: <span class="literal">null</span>, <span class="comment">// 加载第一页数据服务器返回的时间; 防止用户翻页时,后台新增了数据从而导致下一页数据重复;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">noMoreSize</span>: <span class="number">3</span>, <span class="comment">// 如果列表已无数据,可设置列表的总数量要大于等于5条才显示无更多数据;避免列表数据过少(比如只有一条数据),显示无更多数据会不好看</span></span><br><span class="line">    <span class="attr">offset</span>: <span class="number">80</span>, <span class="comment">// 距底部多远时,触发upCallback(仅mescroll-uni生效, 对于mescroll-body则需在pages.json设置&quot;onReachBottomDistance&quot;)</span></span><br><span class="line">    <span class="attr">bgColor</span>: <span class="string">&quot;transparent&quot;</span>, <span class="comment">// 背景颜色 (建议在pages.json中再设置一下backgroundColorTop)</span></span><br><span class="line">    <span class="attr">textColor</span>: <span class="string">&quot;gray&quot;</span>, <span class="comment">// 文本颜色 (当bgColor配置了颜色,而textColor未配置时,则textColor会默认为白色)</span></span><br><span class="line">    <span class="attr">textLoading</span>: <span class="string">&quot;加载中 ...&quot;</span>, <span class="comment">// 加载中的提示文本</span></span><br><span class="line">    <span class="attr">textNoMore</span>: <span class="string">&quot;-- END --&quot;</span>, <span class="comment">// 没有更多数据的提示文本</span></span><br><span class="line">    <span class="attr">toTop</span>: &#123;</span><br><span class="line">      <span class="comment">// 回到顶部按钮,需配置src才显示</span></span><br><span class="line">      <span class="attr">src</span>: <span class="string">&quot;https://www.mescroll.com/img/mescroll-totop.png&quot;</span>, <span class="comment">// 图片路径</span></span><br><span class="line">      <span class="attr">offset</span>: <span class="number">1000</span>, <span class="comment">// 列表滚动多少距离才显示回到顶部按钮,默认1000</span></span><br><span class="line">      <span class="attr">duration</span>: <span class="number">300</span>, <span class="comment">// 回到顶部的动画时长,默认300ms (当值为0或300则使用系统自带回到顶部,更流畅; 其他值则通过step模拟,部分机型可能不够流畅,所以非特殊情况不建议修改此项)</span></span><br><span class="line">      <span class="attr">zIndex</span>: <span class="number">9990</span>, <span class="comment">// fixed定位z-index值</span></span><br><span class="line">      <span class="attr">left</span>: <span class="literal">null</span>, <span class="comment">// 到左边的距离, 默认null. 此项有值时,right不生效. (支持20, &quot;20rpx&quot;, &quot;20px&quot;, &quot;20%&quot;格式的值, 其中纯数字则默认单位rpx)</span></span><br><span class="line">      <span class="attr">right</span>: <span class="number">20</span>, <span class="comment">// 到右边的距离, 默认20 (支持20, &quot;20rpx&quot;, &quot;20px&quot;, &quot;20%&quot;格式的值, 其中纯数字则默认单位rpx)</span></span><br><span class="line">      <span class="attr">bottom</span>: <span class="number">120</span>, <span class="comment">// 到底部的距离, 默认120 (支持20, &quot;20rpx&quot;, &quot;20px&quot;, &quot;20%&quot;格式的值, 其中纯数字则默认单位rpx)</span></span><br><span class="line">      <span class="attr">safearea</span>: <span class="literal">false</span>, <span class="comment">// bottom的偏移量是否加上底部安全区的距离, 默认false, 需要适配iPhoneX时使用 (具体的界面如果不配置此项,则取mescroll组件props的safearea值)</span></span><br><span class="line">      <span class="attr">width</span>: <span class="number">72</span>, <span class="comment">// 回到顶部图标的宽度, 默认72 (支持20, &quot;20rpx&quot;, &quot;20px&quot;, &quot;20%&quot;格式的值, 其中纯数字则默认单位rpx)</span></span><br><span class="line">      <span class="attr">radius</span>: <span class="string">&quot;50%&quot;</span>, <span class="comment">// 圆角, 默认&quot;50%&quot; (支持20, &quot;20rpx&quot;, &quot;20px&quot;, &quot;20%&quot;格式的值, 其中纯数字则默认单位rpx)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">empty</span>: &#123;</span><br><span class="line">      <span class="attr">use</span>: <span class="literal">true</span>, <span class="comment">// 是否显示空布局</span></span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&quot;https://www.mescroll.com/img/mescroll-empty.png&quot;</span>, <span class="comment">// 图标路径</span></span><br><span class="line">      <span class="attr">tip</span>: <span class="string">&quot;~ 暂无相关数据 ~&quot;</span>, <span class="comment">// 提示</span></span><br><span class="line">      <span class="attr">btnText</span>: <span class="string">&quot;去逛逛 &gt;&quot;</span>, <span class="comment">// 按钮</span></span><br><span class="line">      <span class="attr">fixed</span>: <span class="literal">false</span>, <span class="comment">// 是否使用fixed定位,默认false; 配置fixed为true,以下的top和zIndex才生效 (transform会使fixed失效,最终会降级为absolute)</span></span><br><span class="line">      <span class="attr">top</span>: <span class="string">&quot;100rpx&quot;</span>, <span class="comment">// fixed定位的top值 (完整的单位值,如 &quot;10%&quot;; &quot;100rpx&quot;)</span></span><br><span class="line">      <span class="attr">zIndex</span>: <span class="number">99</span>, <span class="comment">// fixed定位z-index值</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onScroll</span>: <span class="literal">true</span>, <span class="comment">// 是否监听滚动事件, 默认false, 仅mescroll-uni生效; mescroll-body直接声明onPageScroll (配置为true时,可@scroll=&quot;scroll&quot;获取到滚动条位置和方向; 注意监听列表滚动是非常耗性能的,很容易出现卡顿,非特殊情况不要配置此项)</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="小发现"><a href="#小发现" class="headerlink" title="小发现"></a>小发现</h3><ol><li>官网为了适配苹果端，用了组件的情况下，最下面会有一个留白，大部分同学应该不需要处理，可是样式已经是做过适配的情况，又不需要此留白，可在全局加上如下样式：<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> <span class="selector-class">.mescroll-bottombar</span>&#123;</span><br><span class="line">        <span class="attribute">height</span>: unset <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>使用组件的话最下面会有 <code>--END--</code> 这样的文字提示，但是如果后端返回的total，小于5条，或者页面数据总共小于5条，那么此文字是无效的，因此大家需要任何情况都需要文字，处理返回的条数传入组件大于5条即可</div><div class="story post-story"><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2></li></ol><ul><li>本文大部分主要复制官网内容，做一个简单的梳理，更多精彩的内容，请移步 <a href="http://www.mescroll.com/" target="_blank" rel="noopener external nofollow noreferrer">官网</a></li><li>官网还有 <code>&lt;mescroll-empty&gt;</code> 等使用方法</li><li>个性化使用组件，还可以有很多好看的动画以及配置</li></ul></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;在使用uniapp开发项目的过程中，在很多场景里都需要下拉刷新和上拉加载，而 &lt;code&gt;mescroll.js&lt;/code&gt; 则是一个非常精致的下拉刷新和上拉加载 js 框架。&lt;/p&gt;
&lt;p&gt;官网地址：&lt;a href=&quot;http://www.mescroll.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener external nofollow noreferrer&quot;&gt;mescroll&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/uni-app/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/tags/uni-app/"/>
    
  </entry>
  
  <entry>
    <title>vue3 各个工具类的封装</title>
    <link href="https://miren123.gitee.io/cljwyh1qe00115kwf9rdbemvb/"/>
    <id>https://miren123.gitee.io/cljwyh1qe00115kwf9rdbemvb/</id>
    <published>2023-05-25T16:00:00.000Z</published>
    <updated>2023-06-18T14:27:46.669Z</updated>
    
    <content type="html"><![CDATA[<p>现在 <code>vue3</code> 已经越来越多人使用了，为了提高开发的效率，这里封装了很多的工具类，让大家的开发过程更加的酣畅淋漓。</p><span id="more"></span><div class="story post-story"><h2 id="axios-和-api-的封装"><a href="#axios-和-api-的封装" class="headerlink" title="axios 和 api 的封装"></a><code>axios</code> 和 <code>api</code> 的封装</h2><p>一般选择在<code>pages</code>同级的根目录下，创建<code>utils</code>文件夹，<code>utils</code>文件夹下创建<code>axios.ts</code></p><ul><li><code>utils/axios.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, &#123; <span class="title class_">AxiosResponse</span>, <span class="title class_">AxiosRequestConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; pinia, notification &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/utils&quot;</span>; <span class="comment">// 工具类</span></span><br><span class="line"><span class="keyword">import</span> &#123; storage &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>; <span class="comment">// 缓存</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态管理 pinia</span></span><br><span class="line"><span class="keyword">import</span> userStore <span class="keyword">from</span> <span class="string">&#x27;@/store/user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useUserStore = <span class="title function_">userStore</span>(pinia)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">baseURL</span>: string = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这一步的目的是判断出当前是开发环境还是生成环境，方法不止一种，达到目的就行</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&quot;development&quot;</span>) &#123;</span><br><span class="line">    baseURL = <span class="string">&#x27;http://development.com/api/&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    baseURL = <span class="string">&#x27;http://pro.com/api/&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">env</span>.<span class="property">NODE_ENV</span>, <span class="string">&#x27;node-env&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">    <span class="attr">baseURL</span>: baseURL,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>  <span class="comment">// 设置最大请求时间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">        <span class="comment">// 处理请求头等逻辑</span></span><br><span class="line">        config.<span class="property">headers</span> = config.<span class="property">headers</span> || &#123;&#125;</span><br><span class="line">        config.<span class="property">headers</span>.<span class="property">token</span> = storage.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error: any</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="keyword">async</span> (<span class="attr">res</span>: <span class="title class_">AxiosResponse</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">code</span>: number = res.<span class="property">data</span>.<span class="property">code</span></span><br><span class="line">        <span class="comment">// 未登录</span></span><br><span class="line">        <span class="keyword">if</span> (code === <span class="number">1001</span>) &#123;</span><br><span class="line">            <span class="title function_">notification</span>(<span class="string">&#x27;错误提示&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>, <span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">            <span class="comment">// 用户信息、token、部分缓存等数据的清空</span></span><br><span class="line">            <span class="comment">// 跳转到登录页/注册页等逻辑</span></span><br><span class="line">            router.<span class="title function_">push</span>(&#123;<span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>&#125;)</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(res.<span class="property">data</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error: any</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 可能有些接口时在这里处理未登录等清空，根据接口的性质来搬运</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure><p>在<code>pages</code>同级的根目录下，创建<code>api</code>文件夹，<code>api</code>文件夹下创建<code>index.ts</code></p><ul><li><code>api/index.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：故蓝寻</span></span><br><span class="line"><span class="comment"> * 时间：2023/01/13 14:25:35</span></span><br><span class="line"><span class="comment"> * 功能：获取列表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getList</span> = (<span class="params">params: <span class="built_in">Object</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/getList&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        <span class="attr">params</span>: params</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：故蓝寻</span></span><br><span class="line"><span class="comment"> * 时间：2022/01/13 14:25:35</span></span><br><span class="line"><span class="comment"> * 功能：设置数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setData</span> = (<span class="params">params: <span class="built_in">Object</span> = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/setData&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">params</span>: params</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/index&#x27;</span>; <span class="comment">// 接口</span></span><br><span class="line"><span class="keyword">import</span> &#123; loading, notification &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/utils&quot;</span>; <span class="comment">// 工具类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：故蓝寻</span></span><br><span class="line"><span class="comment"> * 时间：2023/03/26 12:20:02</span></span><br><span class="line"><span class="comment"> * 功能：获取详情</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onGetData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">loading</span>() <span class="comment">// load加载</span></span><br><span class="line">  <span class="title function_">getData</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">loading</span>().<span class="title function_">close</span>() <span class="comment">// 关闭load加载</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">notification</span>(<span class="string">&#x27;成功提示&#x27;</span>, res.<span class="property">msg</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">      <span class="comment">// 逻辑处理</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">notification</span>(<span class="string">&#x27;错误提示&#x27;</span>, res.<span class="property">msg</span>, <span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">    <span class="title function_">loading</span>().<span class="title function_">close</span>()</span><br><span class="line">    <span class="comment">// 错误的逻辑处理</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="storage-的封装"><a href="#storage-的封装" class="headerlink" title="storage 的封装"></a><code>storage</code> 的封装</h2><p><code>utils</code>文件夹下创建<code>storage.ts</code></p><ul><li><code>utils/storage.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装操作localstorage本地存储的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> storage = &#123;</span><br><span class="line">    <span class="comment">//存储</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: string, value: any</span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//取出数据</span></span><br><span class="line">    get&lt;T&gt;(<span class="attr">key</span>: string) &#123;</span><br><span class="line">        <span class="keyword">const</span> value = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (value &amp;&amp; value != <span class="string">&quot;undefined&quot;</span> &amp;&amp; value != <span class="string">&quot;null&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &lt;T&gt;<span class="title class_">JSON</span>.<span class="title function_">parse</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装操作sessionStorage本地存储的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sessionStorage = &#123;</span><br><span class="line">    <span class="comment">//存储</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: string, value: any</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//取出数据</span></span><br><span class="line">    get&lt;T&gt;(<span class="attr">key</span>: string) &#123;</span><br><span class="line">        <span class="keyword">const</span> value = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (value &amp;&amp; value != <span class="string">&quot;undefined&quot;</span> &amp;&amp; value != <span class="string">&quot;null&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sessionStorage, storage &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span> <span class="comment">// 引入</span></span><br><span class="line"></span><br><span class="line">storage.<span class="title function_">set</span>(<span class="string">&#x27;token&#x27;</span>, <span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">storage.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">storage.<span class="title function_">remove</span>(<span class="string">&#x27;token&#x27;</span>, <span class="string">&#x27;token&#x27;</span>)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="utils-的封装（长期完善）"><a href="#utils-的封装（长期完善）" class="headerlink" title="utils 的封装（长期完善）"></a><code>utils</code> 的封装（长期完善）</h2><p><code>utils</code>文件夹下创建<code>utils.ts</code></p><ul><li><code>utils/utils.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElLoading</span>, <span class="title class_">ElNotification</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这里设置pinia的原因很简单，pinia模块化的时候，在main.ts里需要注册createPinia()</span></span><br><span class="line"><span class="comment"> * 但是main.ts在注册的话，axios.ts更新pinia就不能在其它地方获取，相当于创建了两个pinia</span></span><br><span class="line"><span class="comment"> * 如果没有使用pinia模块化可忽略这里</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：获取路由参数</span></span><br><span class="line"><span class="comment"> * 使用：解构 const &#123; id &#125; = routerParam，或 let routerParam = routerParam()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">routerParam</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">query</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loadOptions = &#123;</span><br><span class="line">    <span class="attr">lock</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;加载中...&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;rgba(255, 255, 255, 0.5)&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：loading</span></span><br><span class="line"><span class="comment"> * 使用：loading() 触发加载，loading.close() 关闭加载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">loading</span>(<span class="params">options = loadOptions</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">ElLoading</span>.<span class="title function_">service</span>(options)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：通知</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">notification</span>(<span class="params">title: string = <span class="string">&#x27;提示&#x27;</span>, message: string, type: <span class="string">&#x27;success&#x27;</span> | <span class="string">&#x27;error&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;info&#x27;</span></span>)&#123;</span><br><span class="line">    <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">        title,</span><br><span class="line">        message,</span><br><span class="line">        type,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：路由解析并且拼接</span></span><br><span class="line"><span class="comment"> * 使用：parseUrl(&#x27;home&#x27;, &#123;id:1,type: &#x27;add&#x27;&#125;)</span></span><br><span class="line"><span class="comment"> * 返回：&#x27;/pages/home?id=1&amp;type=add&#x27;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">parseUrl</span>(<span class="params">url: <span class="string">&#x27;&#x27;</span>, params: any</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    <span class="keyword">let</span> string = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> params) &#123;</span><br><span class="line">        arr.<span class="title function_">push</span>(i + <span class="string">&quot;=&quot;</span> + params[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    string = <span class="string">&quot;/pages/&quot;</span> + url;</span><br><span class="line">    <span class="keyword">if</span> (arr.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        string += <span class="string">&quot;?&quot;</span> + arr.<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：判断数据类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isDataType</span>(<span class="params">data: any, type: any</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(data) === <span class="string">&#x27;[object &#x27;</span> + type + <span class="string">&#x27;]&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：判断数组里是否有某个key</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">in_array</span>(<span class="params">search: any, array: []</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> array) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] == search) &#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;现在 &lt;code&gt;vue3&lt;/code&gt; 已经越来越多人使用了，为了提高开发的效率，这里封装了很多的工具类，让大家的开发过程更加的酣畅淋漓。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue3" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue3/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue3" scheme="https://miren123.gitee.io/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>vue表单验证，多种校验规则</title>
    <link href="https://miren123.gitee.io/cljwyh1qi00165kwf330n9vpm/"/>
    <id>https://miren123.gitee.io/cljwyh1qi00165kwf330n9vpm/</id>
    <published>2023-05-13T16:00:00.000Z</published>
    <updated>2023-06-18T14:28:11.416Z</updated>
    
    <content type="html"><![CDATA[<p>vue 表单验证，具体的大家根据自身项目和框架来，本文以antd举例。</p><span id="more"></span><div class="story post-story"><h2 id="axios-和-api-的封装"><a href="#axios-和-api-的封装" class="headerlink" title="axios 和 api 的封装"></a><code>axios</code> 和 <code>api</code> 的封装</h2><p>一般选择在<code>pages</code>同级的根目录下，创建<code>utils</code>文件夹，<code>utils</code>文件夹下创建<code>axios.ts</code></p><ul><li><code>utils/axios.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, &#123; <span class="title class_">AxiosResponse</span>, <span class="title class_">AxiosRequestConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; pinia, notification &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/utils&quot;</span>; <span class="comment">// 工具类</span></span><br><span class="line"><span class="keyword">import</span> &#123; storage &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>; <span class="comment">// 缓存</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态管理 pinia</span></span><br><span class="line"><span class="keyword">import</span> userStore <span class="keyword">from</span> <span class="string">&#x27;@/store/user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useUserStore = <span class="title function_">userStore</span>(pinia)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">baseURL</span>: string = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这一步的目的是判断出当前是开发环境还是生成环境，方法不止一种，达到目的就行</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&quot;development&quot;</span>) &#123;</span><br><span class="line">    baseURL = <span class="string">&#x27;http://development.com/api/&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    baseURL = <span class="string">&#x27;http://pro.com/api/&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">env</span>.<span class="property">NODE_ENV</span>, <span class="string">&#x27;node-env&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">    <span class="attr">baseURL</span>: baseURL,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>  <span class="comment">// 设置最大请求时间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">        <span class="comment">// 处理请求头等逻辑</span></span><br><span class="line">        config.<span class="property">headers</span> = config.<span class="property">headers</span> || &#123;&#125;</span><br><span class="line">        config.<span class="property">headers</span>.<span class="property">token</span> = storage.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error: any</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="keyword">async</span> (<span class="attr">res</span>: <span class="title class_">AxiosResponse</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">code</span>: number = res.<span class="property">data</span>.<span class="property">code</span></span><br><span class="line">        <span class="comment">// 未登录</span></span><br><span class="line">        <span class="keyword">if</span> (code === <span class="number">1001</span>) &#123;</span><br><span class="line">            <span class="title function_">notification</span>(<span class="string">&#x27;错误提示&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>, <span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">            <span class="comment">// 用户信息、token、部分缓存等数据的清空</span></span><br><span class="line">            <span class="comment">// 跳转到登录页/注册页等逻辑</span></span><br><span class="line">            router.<span class="title function_">push</span>(&#123;<span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>&#125;)</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(res.<span class="property">data</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error: any</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 可能有些接口时在这里处理未登录等清空，根据接口的性质来搬运</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure><p>在<code>pages</code>同级的根目录下，创建<code>api</code>文件夹，<code>api</code>文件夹下创建<code>index.ts</code></p><ul><li><code>api/index.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：故蓝寻</span></span><br><span class="line"><span class="comment"> * 时间：2023/01/13 14:25:35</span></span><br><span class="line"><span class="comment"> * 功能：获取列表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getList</span> = (<span class="params">params: <span class="built_in">Object</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/getList&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        <span class="attr">params</span>: params</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：故蓝寻</span></span><br><span class="line"><span class="comment"> * 时间：2022/01/13 14:25:35</span></span><br><span class="line"><span class="comment"> * 功能：设置数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setData</span> = (<span class="params">params: <span class="built_in">Object</span> = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/setData&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">params</span>: params</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/index&#x27;</span>; <span class="comment">// 接口</span></span><br><span class="line"><span class="keyword">import</span> &#123; loading, notification &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/utils&quot;</span>; <span class="comment">// 工具类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：故蓝寻</span></span><br><span class="line"><span class="comment"> * 时间：2023/03/26 12:20:02</span></span><br><span class="line"><span class="comment"> * 功能：获取详情</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onGetData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">loading</span>() <span class="comment">// load加载</span></span><br><span class="line">  <span class="title function_">getData</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">loading</span>().<span class="title function_">close</span>() <span class="comment">// 关闭load加载</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">notification</span>(<span class="string">&#x27;成功提示&#x27;</span>, res.<span class="property">msg</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">      <span class="comment">// 逻辑处理</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">notification</span>(<span class="string">&#x27;错误提示&#x27;</span>, res.<span class="property">msg</span>, <span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">    <span class="title function_">loading</span>().<span class="title function_">close</span>()</span><br><span class="line">    <span class="comment">// 错误的逻辑处理</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="storage-的封装"><a href="#storage-的封装" class="headerlink" title="storage 的封装"></a><code>storage</code> 的封装</h2><p><code>utils</code>文件夹下创建<code>storage.ts</code></p><ul><li><code>utils/storage.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装操作localstorage本地存储的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> storage = &#123;</span><br><span class="line">    <span class="comment">//存储</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: string, value: any</span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//取出数据</span></span><br><span class="line">    get&lt;T&gt;(<span class="attr">key</span>: string) &#123;</span><br><span class="line">        <span class="keyword">const</span> value = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (value &amp;&amp; value != <span class="string">&quot;undefined&quot;</span> &amp;&amp; value != <span class="string">&quot;null&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &lt;T&gt;<span class="title class_">JSON</span>.<span class="title function_">parse</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装操作sessionStorage本地存储的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sessionStorage = &#123;</span><br><span class="line">    <span class="comment">//存储</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: string, value: any</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//取出数据</span></span><br><span class="line">    get&lt;T&gt;(<span class="attr">key</span>: string) &#123;</span><br><span class="line">        <span class="keyword">const</span> value = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (value &amp;&amp; value != <span class="string">&quot;undefined&quot;</span> &amp;&amp; value != <span class="string">&quot;null&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sessionStorage, storage &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span> <span class="comment">// 引入</span></span><br><span class="line"></span><br><span class="line">storage.<span class="title function_">set</span>(<span class="string">&#x27;token&#x27;</span>, <span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">storage.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">storage.<span class="title function_">remove</span>(<span class="string">&#x27;token&#x27;</span>, <span class="string">&#x27;token&#x27;</span>)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="utils-的封装（长期完善）"><a href="#utils-的封装（长期完善）" class="headerlink" title="utils 的封装（长期完善）"></a><code>utils</code> 的封装（长期完善）</h2><p><code>utils</code>文件夹下创建<code>utils.ts</code></p><ul><li><code>utils/utils.ts</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElLoading</span>, <span class="title class_">ElNotification</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这里设置pinia的原因很简单，pinia模块化的时候，在main.ts里需要注册createPinia()</span></span><br><span class="line"><span class="comment"> * 但是main.ts在注册的话，axios.ts更新pinia就不能在其它地方获取，相当于创建了两个pinia</span></span><br><span class="line"><span class="comment"> * 如果没有使用pinia模块化可忽略这里</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：获取路由参数</span></span><br><span class="line"><span class="comment"> * 使用：解构 const &#123; id &#125; = routerParam，或 let routerParam = routerParam()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">routerParam</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">query</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loadOptions = &#123;</span><br><span class="line">    <span class="attr">lock</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;加载中...&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;rgba(255, 255, 255, 0.5)&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：loading</span></span><br><span class="line"><span class="comment"> * 使用：loading() 触发加载，loading.close() 关闭加载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">loading</span>(<span class="params">options = loadOptions</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">ElLoading</span>.<span class="title function_">service</span>(options)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：通知</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">notification</span>(<span class="params">title: string = <span class="string">&#x27;提示&#x27;</span>, message: string, type: <span class="string">&#x27;success&#x27;</span> | <span class="string">&#x27;error&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;info&#x27;</span></span>)&#123;</span><br><span class="line">    <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">        title,</span><br><span class="line">        message,</span><br><span class="line">        type,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：路由解析并且拼接</span></span><br><span class="line"><span class="comment"> * 使用：parseUrl(&#x27;home&#x27;, &#123;id:1,type: &#x27;add&#x27;&#125;)</span></span><br><span class="line"><span class="comment"> * 返回：&#x27;/pages/home?id=1&amp;type=add&#x27;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">parseUrl</span>(<span class="params">url: <span class="string">&#x27;&#x27;</span>, params: any</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    <span class="keyword">let</span> string = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> params) &#123;</span><br><span class="line">        arr.<span class="title function_">push</span>(i + <span class="string">&quot;=&quot;</span> + params[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    string = <span class="string">&quot;/pages/&quot;</span> + url;</span><br><span class="line">    <span class="keyword">if</span> (arr.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        string += <span class="string">&quot;?&quot;</span> + arr.<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：判断数据类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isDataType</span>(<span class="params">data: any, type: any</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(data) === <span class="string">&#x27;[object &#x27;</span> + type + <span class="string">&#x27;]&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：判断数组里是否有某个key</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">in_array</span>(<span class="params">search: any, array: []</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> array) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] == search) &#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;vue 表单验证，具体的大家根据自身项目和框架来，本文以antd举例。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="https://miren123.gitee.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>ios 使用钉钉（专有钉钉、浙政钉）嵌入的h5 formData 无法正常使用</title>
    <link href="https://miren123.gitee.io/cljwyh1q8000o5kwfhl3k2kjq/"/>
    <id>https://miren123.gitee.io/cljwyh1q8000o5kwfhl3k2kjq/</id>
    <published>2023-04-25T16:00:00.000Z</published>
    <updated>2023-06-18T14:28:44.503Z</updated>
    
    <content type="html"><![CDATA[<p>在钉钉和浙政钉项目里有上传功能的需求，安卓可以正常上传，但是ios就是无法上传成功，得到的对象结构是 Object { appendData : ..., realFormData : ...}，后端就无法接受到</p><span id="more"></span><div class="story post-story"><h2 id="axios配置"><a href="#axios配置" class="headerlink" title="axios配置"></a>axios配置</h2><ul><li>平常的请求方法</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作者：作者</span></span><br><span class="line"><span class="comment"> * 时间：2022/10/27 14:41:30</span></span><br><span class="line"><span class="comment"> * 功能：上传文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">informUploadFile</span>= (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;/h5/inform/uploadFile&#x27;</span>,</span><br><span class="line">     <span class="attr">zwApi</span>: <span class="string">&#x27;mgop.zy.znj.informUploadFile&#x27;</span>,</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: params,</span><br><span class="line">     <span class="attr">noToken</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="attr">headers</span>: &#123;</span><br><span class="line">       <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;multipart/form-data&quot;</span></span><br><span class="line">     &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>优化后的方法</p></blockquote><ul><li>需要在<code>axios</code>里单独加配置</li><li>方法里加入区分 ios 和安卓的变量</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ran = navigator.<span class="property">userAgent</span></span><br><span class="line"><span class="keyword">let</span> isAndroid = ran.<span class="title function_">indexOf</span>(<span class="string">&#x27;Android&#x27;</span>) &gt; -<span class="number">1</span> || ran.<span class="title function_">indexOf</span>(<span class="string">&#x27;Linux&#x27;</span>) &gt; -<span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> isIOS = !!ran.<span class="title function_">match</span>(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上传附件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">informUploadFile</span>(<span class="params">params</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> option = &#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/h5/inform/uploadFile&#x27;</span>,</span><br><span class="line">    <span class="attr">zwApi</span>: <span class="string">&#x27;mgop.zy.znj.informUploadFile&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: params,</span><br><span class="line">    <span class="attr">noToken</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;multipart/form-data&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isIOS) &#123;</span><br><span class="line">    option = &#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/h5/inform/uploadFile&#x27;</span>,</span><br><span class="line">      <span class="attr">zwApi</span>: <span class="string">&#x27;mgop.zy.znj.informUploadFile&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: params,</span><br><span class="line">      <span class="attr">noToken</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;multipart/form-data&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 这是重点，本人测试过，加上这个配置，安卓又不可以了，所以区分安卓和ios</span></span><br><span class="line">      <span class="attr">transformRequest</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123; data.<span class="property">toString</span> = <span class="function">() =&gt;</span> <span class="string">&quot;[object FormData]&quot;</span>; <span class="keyword">return</span> data; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(option)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>区分安卓和ios的方法很多，大家根据自己的项目情况来实现。</li><li>我只测试过浙政钉和钉钉，估计浙里办也会有这样的情况，也可以这样配置试一下。</li></ul></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;在钉钉和浙政钉项目里有上传功能的需求，安卓可以正常上传，但是ios就是无法上传成功，得到的对象结构是 Object { appendData : ..., realFormData : ...}，后端就无法接受到&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue/"/>
    
    
  </entry>
  
  <entry>
    <title>antd库开发时表单里label太长的情况</title>
    <link href="https://miren123.gitee.io/cljwyh1qa000s5kwf3x1f9spz/"/>
    <id>https://miren123.gitee.io/cljwyh1qa000s5kwf3x1f9spz/</id>
    <published>2023-03-16T16:00:00.000Z</published>
    <updated>2023-06-18T14:29:22.540Z</updated>
    
    <content type="html"><![CDATA[<p>我们在用antd组件库开发的时候，其实很多时候会遇到一些奇奇怪怪的场景，但是只需要花费一丢丢时间就可以解决，可如此会浪费时间，这里主要是label太长了的场景</p><span id="more"></span><div class="story post-story"><h2 id="表单的label太长了"><a href="#表单的label太长了" class="headerlink" title="表单的label太长了"></a>表单的<code>label</code>太长了</h2><p><img src="https://img-blog.csdnimg.cn/f261ba06fa3749adb44f53f59efab242.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/f261ba06fa3749adb44f53f59efab242.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><blockquote><p>看上图发现，这个字段的label太长了，但是不可能因为这个字段影响了整体的布局，那我们得让这个label 显示完全</p></blockquote><ul><li>首先得用 <code>solt</code> 自定义label</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这里的label必须去掉，就算是label=&#x27;&#x27;，下面的solt都不能用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span> <span class="attr">class</span>=<span class="string">&quot;label-box&quot;</span>&gt;</span>产业、产品类型及规模以及所在地址<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-textarea</span> <span class="attr">v-model</span>=<span class="string">&quot;infoData.conditionContent&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;请输入&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>自定义样式</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.label-box</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>; // 建议<span class="number">80%</span>，太长就会超出内容</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">white-space</span>: break-spaces;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">vertical-align</span>: bottom; // 这是为了让整体的字往下移动一点</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><p><img src="https://img-blog.csdnimg.cn/3a6df0e9ba9244518538f64be5803c0e.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/3a6df0e9ba9244518538f64be5803c0e.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/69df4b22ffa343fd9e4750a873d6e965.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/69df4b22ffa343fd9e4750a873d6e965.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p></div><div class="story post-story"><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>其实就是几行代码的问题，但是主要还是得理解且运用。</li><li>如果不仅仅是文字，还有其它情况也可以如此来根据自定义，比较方便</li></ul></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;我们在用antd组件库开发的时候，其实很多时候会遇到一些奇奇怪怪的场景，但是只需要花费一丢丢时间就可以解决，可如此会浪费时间，这里主要是label太长了的场景&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue/"/>
    
    
  </entry>
  
  <entry>
    <title>fastadmin 表单（父子分类）、层级关系、tree结构</title>
    <link href="https://miren123.gitee.io/cljwyh1pu00035kwfc0y94n0n/"/>
    <id>https://miren123.gitee.io/cljwyh1pu00035kwfc0y94n0n/</id>
    <published>2023-03-11T16:00:00.000Z</published>
    <updated>2023-06-18T14:37:53.225Z</updated>
    
    <content type="html"><![CDATA[<p>fastadmin 可以通过在数据库设置字段 <code>category_id</code> 同时去对分类进行响应的表名对应时，即可自动生成分类下拉框，可是fast自动生成的分类下拉框是没有层级关系的，它会将所有的分类查询出来。<br>如果分类名没有层级关系，或者命名重复，那不影响，可是命名重复的情况也会出现，你却不知道是在哪一个父级下面，如下方法是将分类的tree结构，拿过来复现，非常适用：</p><span id="more"></span><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><blockquote><p>首先把对应控制下的 add.html 和 edit.html 响应的表单更改为如下内容：</p></blockquote><ul><li>add.html 对应的表单<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;control-label col-xs-12 col-sm-2&quot;</span>&gt;</span>&#123;:__(&#x27;Category_id&#x27;)&#125;:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12 col-sm-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;c-category_id&quot;</span> <span class="attr">data-rule</span>=<span class="string">&quot;required&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control selectpicker&quot;</span> <span class="attr">name</span>=<span class="string">&quot;row[category_id]&quot;</span>&gt;</span></span><br><span class="line">            &#123;foreach name=&quot;parentList&quot; item=&quot;vo&quot;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">data-type</span>=<span class="string">&quot;&#123;$vo.type&#125;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;$key&#125;&quot;</span> &#123;<span class="attr">in</span> <span class="attr">name</span>=<span class="string">&quot;key&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&#125;<span class="attr">selected</span>&#123;/<span class="attr">in</span>&#125;&gt;</span>&#123;$vo.name&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            &#123;/foreach&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>edit.html 对应的表单</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;control-label col-xs-12 col-sm-2&quot;</span>&gt;</span>&#123;:__(&#x27;Category_id&#x27;)&#125;:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12 col-sm-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;c-category_id&quot;</span> <span class="attr">data-rule</span>=<span class="string">&quot;required&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control selectpicker&quot;</span> <span class="attr">name</span>=<span class="string">&quot;row[category_id]&quot;</span>&gt;</span></span><br><span class="line">            &#123;foreach name=&quot;parentList&quot; item=&quot;vo&quot;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">data-type</span>=<span class="string">&quot;&#123;$vo.type&#125;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;$key&#125;&quot;</span> &#123;<span class="attr">in</span> <span class="attr">name</span>=<span class="string">&quot;key&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$row.category_id&quot;</span>&#125;<span class="attr">selected</span>&#123;/<span class="attr">in</span>&#125;&gt;</span>&#123;$vo.name&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            &#123;/foreach&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>在控制器里编写对应的方法，返回tree结构的数组，这样在表单页面就可以呈现tree结构</p></blockquote><ul><li>以下代码写在构造函数里</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这是在上方需要引入的</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">fast</span>\<span class="title">Tree</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">common</span>\<span class="title">model</span>\<span class="title">Category</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$tree</span> = <span class="title class_">Tree</span>::<span class="title function_ invoke__">instance</span>();</span><br><span class="line"><span class="comment">// 以下的类型换成自己对应的类型即可</span></span><br><span class="line"><span class="variable">$tree</span>-&gt;<span class="title function_ invoke__">init</span>(<span class="title function_ invoke__">collection</span>(<span class="title class_">Category</span>::<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;wikipedia&#x27;</span>)-&gt;<span class="title function_ invoke__">order</span>(<span class="string">&#x27;weigh desc,id desc&#x27;</span>)-&gt;<span class="title function_ invoke__">select</span>())-&gt;<span class="title function_ invoke__">toArray</span>(), <span class="string">&#x27;pid&#x27;</span>);</span><br><span class="line"><span class="variable language_">$this</span>-&gt;categorylist = <span class="variable">$tree</span>-&gt;<span class="title function_ invoke__">getTreeList</span>(<span class="variable">$tree</span>-&gt;<span class="title function_ invoke__">getTreeArray</span>(<span class="number">0</span>), <span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable language_">$this</span>-&gt;categorylist <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">    <span class="variable">$categorydata</span>[<span class="variable">$v</span>[<span class="string">&#x27;id&#x27;</span>]] = <span class="variable">$v</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">$this</span>-&gt;view-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&quot;parentList&quot;</span>, <span class="variable">$categorydata</span>);</span><br></pre></td></tr></table></figure><p><strong>到离这里就可以实现正常的添加和编辑回显了，除了表名不一样，其它照常复制即可。</strong></p><h4 id="列表回显（非必须）"><a href="#列表回显（非必须）" class="headerlink" title="列表回显（非必须）"></a>列表回显（非必须）</h4><blockquote><p>在控制器里的 index 方法重写为：</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查看</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//设置过滤方法</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;request-&gt;<span class="title function_ invoke__">filter</span>([<span class="string">&#x27;strip_tags&#x27;</span>, <span class="string">&#x27;trim&#x27;</span>]);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;request-&gt;<span class="title function_ invoke__">isAjax</span>()) &#123;</span><br><span class="line">        <span class="comment">//如果发送的来源是Selectpage，则转发到Selectpage</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;request-&gt;<span class="title function_ invoke__">request</span>(<span class="string">&#x27;keyField&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">selectpage</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">list</span>(<span class="variable">$where</span>, <span class="variable">$sort</span>, <span class="variable">$order</span>, <span class="variable">$offset</span>, <span class="variable">$limit</span>) = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">buildparams</span>();</span><br><span class="line"></span><br><span class="line">        <span class="variable">$list</span> = <span class="variable language_">$this</span>-&gt;model</span><br><span class="line">            -&gt;<span class="title function_ invoke__">with</span>([<span class="string">&#x27;category&#x27;</span>])</span><br><span class="line">            -&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">order</span>(<span class="variable">$sort</span>, <span class="variable">$order</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">paginate</span>(<span class="variable">$limit</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$list</span> <span class="keyword">as</span> <span class="variable">$row</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="variable">$row</span>-&gt;<span class="title function_ invoke__">getRelation</span>(<span class="string">&#x27;category&#x27;</span>)-&gt;<span class="title function_ invoke__">visible</span>([<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$result</span> = <span class="keyword">array</span>(<span class="string">&quot;total&quot;</span> =&gt; <span class="variable">$list</span>-&gt;<span class="title function_ invoke__">total</span>(), <span class="string">&quot;rows&quot;</span> =&gt; <span class="variable">$list</span>-&gt;<span class="title function_ invoke__">items</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">json</span>(<span class="variable">$result</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;view-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>category common model 需要复制一个到 admin 下的 model 更改命名空间，同时在对应的需要查询的控制器下写入以下方法作为预加载查询</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">category</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">belongsTo</span>(<span class="string">&#x27;Category&#x27;</span>, <span class="string">&#x27;category_id&#x27;</span>, <span class="string">&#x27;id&#x27;</span>, [], <span class="string">&#x27;LEFT&#x27;</span>)-&gt;<span class="title function_ invoke__">setEagerlyType</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>js 里对应的更改</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">field</span>: <span class="string">&#x27;category.name&#x27;</span>, <span class="attr">title</span>: <span class="title function_">__</span>(<span class="string">&#x27;Category_id&#x27;</span>)&#125;,</span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>使用 fastadmin 需要对tp有一定的基础</li><li>列表回显的方法有很多，也可以直接查询拼接上去，本文的方法虽然麻烦，但是性能好一些</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;fastadmin 可以通过在数据库设置字段 &lt;code&gt;category_id&lt;/code&gt; 同时去对分类进行响应的表名对应时，即可自动生成分类下拉框，可是fast自动生成的分类下拉框是没有层级关系的，它会将所有的分类查询出来。&lt;br&gt;如果分类名没有层级关系，或者命名重复，那不影响，可是命名重复的情况也会出现，你却不知道是在哪一个父级下面，如下方法是将分类的tree结构，拿过来复现，非常适用：&lt;/p&gt;</summary>
    
    
    
    <category term="php" scheme="https://miren123.gitee.io/categories/php/"/>
    
    <category term="fast-admin" scheme="https://miren123.gitee.io/categories/php/fast-admin/"/>
    
    
  </entry>
  
  <entry>
    <title>vue3 自定义全局loading组件 （PC和移动端都非常适用）</title>
    <link href="https://miren123.gitee.io/cljwyh1qg00135kwfft7s338x/"/>
    <id>https://miren123.gitee.io/cljwyh1qg00135kwfft7s338x/</id>
    <published>2022-08-09T16:00:00.000Z</published>
    <updated>2023-06-18T14:31:32.210Z</updated>
    
    <content type="html"><![CDATA[<p>在开发的过程中，点击提交按钮，或者是一些其它场景总会遇到loading加载框，PC的一些ui库也没有这样的加载框，无法满足业务需求，因此可以自己自定义一个，实现过程如下。</p><span id="more"></span><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在开发的过程中，点击提交按钮，或者是一些其它场景总会遇到loading加载框，PC的一些ui库也没有这样的加载框，无法满足业务需求，因此可以自己自定义一个，实现过程如下。</p><h3 id="效果图（loading样式可以自定义）"><a href="#效果图（loading样式可以自定义）" class="headerlink" title="效果图（loading样式可以自定义）"></a>效果图（loading样式可以自定义）</h3><img src="https://img-blog.csdnimg.cn/795bdd0d567246dfa3fcdad802285403.gif" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/795bdd0d567246dfa3fcdad802285403.gif" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" width="40%"><img src="https://img-blog.csdnimg.cn/70d317040dc34c7c824d21e77a62ebf3.gif" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/70d317040dc34c7c824d21e77a62ebf3.gif" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" width="47%"><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><blockquote><p>自定义组件 loading.vue（图片放在文末，自行右键另存为）</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loading&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;msg.show&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;load-box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/img/load.png&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--&lt;img src=&quot;@/assets/img/loading_white.png&quot;&gt;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg.title&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;loading&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">msg</span>: <span class="title class_">Object</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.loading</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.load-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">5</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;<span class="attribute">height</span>: <span class="number">100px</span>;<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>:<span class="number">0px</span> <span class="number">1px</span> <span class="number">15px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, .<span class="number">5</span>);<span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;<span class="attribute">flex-direction</span>: column;<span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;<span class="attribute">letter-spacing</span>: .<span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">30px</span>;<span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">      -webkit-<span class="attribute">animation</span>:rotate .<span class="number">8s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> rotate&#123;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">to</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><code>utils/loading.js</code> 创建封装js控制显示和隐藏，以及需要显示的文字</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> myLoad <span class="keyword">from</span> <span class="string">&#x27;@/components/Loading/loading.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> msg = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;加载中...&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> $loading = <span class="title function_">createApp</span>(myLoad, &#123;msg&#125;).<span class="title function_">mount</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> load = &#123;</span><br><span class="line">  <span class="title function_">show</span>(<span class="params">title: any = msg.title</span>) &#123; <span class="comment">// 控制显示loading的方法</span></span><br><span class="line">    msg.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line">    msg.<span class="property">title</span> = title</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>($loading.<span class="property">$el</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">hide</span>(<span class="params"></span>) &#123; <span class="comment">// 控制loading隐藏的方法</span></span><br><span class="line">    msg.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span>  &#123; load &#125;</span><br></pre></td></tr></table></figure><blockquote><p>页面使用</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; load &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/loading.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在需要使用时调用show方法</span></span><br><span class="line"><span class="comment">// 例如在指定api调用，或者其他耗时操作时打开loading</span></span><br><span class="line"><span class="comment">// 不传参默认为 加载中...</span></span><br><span class="line">load.<span class="title function_">show</span>();</span><br><span class="line">load.<span class="title function_">show</span>(<span class="string">&#x27;登录中...&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在加载完成时关闭</span></span><br><span class="line">load.<span class="title function_">hide</span>();</span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>大家可以根据自己的习惯和方式来选择用哪一张图片，也可以动态传参改变。</li><li>样式是仿照移动端的加载框，我是不习惯用那种全屏的加载，大家也可以把样式改为全屏的加载</li><li>为了避免在加载的过程，用户点击页面其它元素，所以本文的样式层级很高，大家可以自行去更改</li></ul><h3 id="图片在这里"><a href="#图片在这里" class="headerlink" title="图片在这里"></a>图片在这里</h3><blockquote><p>图片右击另存为即可，但是这里有水印，大家也可以去图标库找其它的加载图标代替，效果也是一样的<br><img src="https://img-blog.csdnimg.cn/eccaf34cc730415ab206dee83f9dccb0.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/eccaf34cc730415ab206dee83f9dccb0.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" width="22%">  <img src="https://img-blog.csdnimg.cn/fa70e967fd514a4e8fc215bc7124c7ee.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/fa70e967fd514a4e8fc215bc7124c7ee.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" width="21%"></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;在开发的过程中，点击提交按钮，或者是一些其它场景总会遇到loading加载框，PC的一些ui库也没有这样的加载框，无法满足业务需求，因此可以自己自定义一个，实现过程如下。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue3" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue3/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue3" scheme="https://miren123.gitee.io/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>Vue3 验证码倒计时实现（刷新保持状态）</title>
    <link href="https://miren123.gitee.io/cljwyh1qb000w5kwf6kgmd73p/"/>
    <id>https://miren123.gitee.io/cljwyh1qb000w5kwf6kgmd73p/</id>
    <published>2022-08-07T16:00:00.000Z</published>
    <updated>2023-06-18T14:32:35.123Z</updated>
    
    <content type="html"><![CDATA[<p>倒计时的运用场景是需要经常用到的，但是根据业务的不同，好比手机验证码或者是邮箱验证码之类的，即使用户跳转到其它页面或者刷新，再次回到登录也，验证码的倒计时也得保持状态，大家参考逻辑即可，每个人的项目不同，这里提供大概的实现代码。</p><span id="more"></span><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><blockquote><p>主要逻辑</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">labelPosition</span>: <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">  <span class="attr">formData</span>: &#123;</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 倒计时</span></span><br><span class="line">  <span class="attr">countDownTime</span>: <span class="number">60</span>,</span><br><span class="line">  <span class="attr">timer</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">countDownIng</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">countDown</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> startTime = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> nowTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span><br><span class="line">  <span class="keyword">if</span> (startTime) &#123;</span><br><span class="line">    <span class="keyword">let</span> surplus = <span class="number">60</span> - <span class="built_in">parseInt</span>((nowTime - startTime) / <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line">    state.<span class="property">countDownTime</span> = surplus &lt;= <span class="number">0</span> ? <span class="number">0</span> : surplus;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    state.<span class="property">countDownTime</span> = <span class="number">60</span>;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>, nowTime);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  state.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    state.<span class="property">countDownTime</span>--;</span><br><span class="line">    state.<span class="property">getCodeDisabled</span> = <span class="literal">true</span>;</span><br><span class="line">    state.<span class="property">countDownIng</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (state.<span class="property">countDownTime</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>);</span><br><span class="line">      <span class="built_in">clearInterval</span>(state.<span class="property">timer</span>);</span><br><span class="line">      state.<span class="property">countDownTime</span> = <span class="number">60</span>;</span><br><span class="line">      state.<span class="property">countDownIng</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>onMounted 方法</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> sendEndTime = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (sendEndTime) &#123;</span><br><span class="line">    state.<span class="property">countDownIng</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">countDown</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mi-card login-card&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;reg-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:label-position</span>=<span class="string">&quot;labelPosition&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;formData&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> #<span class="attr">append</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;get-code&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;!countDownIng&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;countDown&quot;</span>&gt;</span>获取验证码<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;countDownIng&quot;</span>&gt;</span>倒计时&#123;&#123; countDownTime &#125;&#125;s<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;验证码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.code&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;验证码&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sub-btn to-login&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;defineComponent, reactive, toRefs, onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;LoginPage&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">labelPosition</span>: <span class="string">&#x27;top&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">formData</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">phone</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 倒计时</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">countDownTime</span>: <span class="number">60</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">timer</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">countDownIng</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 作者：故蓝寻</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 时间：2022/08/05 17:13:37</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 功能：获取验证码 事件</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     */</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">countDown</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> startTime = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> nowTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (startTime) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> surplus = <span class="number">60</span> - <span class="built_in">parseInt</span>((nowTime - startTime) / <span class="number">1000</span>, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">        state.<span class="property">countDownTime</span> = surplus &lt;= <span class="number">0</span> ? <span class="number">0</span> : surplus;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        state.<span class="property">countDownTime</span> = <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>, nowTime);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      state.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        state.<span class="property">countDownTime</span>--;</span></span><br><span class="line"><span class="language-javascript">        state.<span class="property">getCodeDisabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        state.<span class="property">countDownIng</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (state.<span class="property">countDownTime</span> &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="built_in">clearInterval</span>(state.<span class="property">timer</span>);</span></span><br><span class="line"><span class="language-javascript">          state.<span class="property">countDownTime</span> = <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">          state.<span class="property">countDownIng</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> sendEndTime = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;startTimeLogin&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (sendEndTime) &#123;</span></span><br><span class="line"><span class="language-javascript">        state.<span class="property">countDownIng</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">countDown</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      ...<span class="title function_">toRefs</span>(state),</span></span><br><span class="line"><span class="language-javascript">      countDown</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>大致逻辑是这样，大家根据具体的需要来完善，vue2也适用</li><li>这是vue3，但是使用的js语法，使用的是ts语法的，也是一样的逻辑</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;倒计时的运用场景是需要经常用到的，但是根据业务的不同，好比手机验证码或者是邮箱验证码之类的，即使用户跳转到其它页面或者刷新，再次回到登录也，验证码的倒计时也得保持状态，大家参考逻辑即可，每个人的项目不同，这里提供大概的实现代码。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue3" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue3/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue3" scheme="https://miren123.gitee.io/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>在 uniapp 中使用阿里图标</title>
    <link href="https://miren123.gitee.io/cljwyh1qn001l5kwf99se9m3z/"/>
    <id>https://miren123.gitee.io/cljwyh1qn001l5kwf99se9m3z/</id>
    <published>2022-07-04T16:00:00.000Z</published>
    <updated>2023-06-18T14:33:58.376Z</updated>
    
    <content type="html"><![CDATA[<p>在使用 <code>uniapp</code> 开发项目的过程中，图标的使用可以说是日常操作，甚至百分之八十的页面都会用到，而如果使用了 ui 框架的话，框架里面本身也会自带图标，不过这些图标很难满足需求，以下则是阿里图标的使用。</p><span id="more"></span><div class="story post-story"><h2 id="寻找需要的图标"><a href="#寻找需要的图标" class="headerlink" title="寻找需要的图标"></a>寻找需要的图标</h2><p><img src="https://img-blog.csdnimg.cn/5a2f94dd4812423e86a09fe459b94d39.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/5a2f94dd4812423e86a09fe459b94d39.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><ul><li>将需要用的图标加入购物车或者收藏起来</li><li>点击右上角的购物车图标，将已经选择的图标添加至项目</li><li>这里需要登录，大家可以自行百度</li></ul><h3 id="下载至本地"><a href="#下载至本地" class="headerlink" title="下载至本地"></a>下载至本地</h3><p><img src="https://img-blog.csdnimg.cn/bf14cae2bc0248fab9be4daf87aaaa69.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/bf14cae2bc0248fab9be4daf87aaaa69.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><blockquote><p>下载到本地后</p></blockquote><p><img src="https://img-blog.csdnimg.cn/ca415d3f38504aff99e21935ad46a2ad.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/ca415d3f38504aff99e21935ad46a2ad.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><ul><li>可以点击 <code>demo_index.html</code> 查看，里面有使用方法。</li></ul></div><div class="story post-story"><h2 id="页面中使用"><a href="#页面中使用" class="headerlink" title="页面中使用"></a>页面中使用</h2><p>将已经下载好的文件里全部拷贝到项目里，推荐放到文件夹 <code>static/iconfont</code> 下，大家可以全部拷贝，也可以只拷贝 <code>iconfont.css</code> 和 <code>iconfont.ttf</code> 两个文件。</p><h3 id="创建本地css文件"><a href="#创建本地css文件" class="headerlink" title="创建本地css文件"></a>创建本地css文件</h3><ul><li>在 <code>common/css</code> 文件下创建 <code>font-icon.css</code> 文件，这是为了配置和引用阿里的图标，代码如下：</li><li>把iconfont.css里的内容复制到此文件内，复制 .iconfont 下面的样式即可，上面的引入不用复制。</li><li>可能有部分小伙伴搜索到的需要加 <code>https</code> ，但是现在官方已经做处理，所以不用，如果不能访问大家最后再加。</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: uniicons;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">src</span>:<span class="built_in">url</span>(<span class="string">&#x27;~@/static/iconfont/iconfont.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: uniicons;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">42</span>upx;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 下面的内容，把iconfont<span class="selector-class">.css</span>里的内容复制过来，复制 <span class="selector-class">.iconfont</span> 下面的样式即可。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="app-vue中引入"><a href="#app-vue中引入" class="headerlink" title="app.vue中引入"></a>app.vue中引入</h3><p><img src="https://img-blog.csdnimg.cn/8ee6e0bc23c04142b4830bb6c410fb0b.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/8ee6e0bc23c04142b4830bb6c410fb0b.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><h3 id="页面使用"><a href="#页面使用" class="headerlink" title="页面使用"></a>页面使用</h3><ul><li><code>demo_index.html</code> 里有相对应的图标使用</li><li>页面中使用把  <code>demo_index.html</code> 里的 class <code>iconfont</code> 换成 <code>icon</code> 即可，因为你在 <code>font-icon.css</code> 里定义叫这个，为了区分大家也可以一样或者自定义名称。<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span><span class="symbol">&amp;#xe8c4;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon icon-xxx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></div><div class="story post-story"><h2 id="导航栏里使用"><a href="#导航栏里使用" class="headerlink" title="导航栏里使用"></a>导航栏里使用</h2><ul><li>将图标选好，下载到本地不用创建css文件来引入，直接使用即可。</li><li>导航栏的使用也是一样的，跟随 uniapp 官网的来即可。</li><li>只不过网上部分也是说加在引入的地方 <code>https</code>，那应该是以前的版本了，现在不用了，按照正常的步骤调试使用，最后不能用了，再去尝试加 <code>https</code> 的办法。</li><li>代码里 <code>text</code> 的值，在 <code>demo_index.html</code> 里都能找到，把前面的符号换成 <code>\u</code> 即可，切记后面没有分号</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;app-plus&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;titleNView&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;buttons&quot;</span>: [&#123;</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;\ue600&quot;</span>,</span><br><span class="line">                <span class="string">&quot;fontSrc&quot;</span>: <span class="string">&quot;/static/iconfont/iconfont.ttf&quot;</span>,</span><br><span class="line">                <span class="string">&quot;float&quot;</span>: <span class="string">&quot;right&quot;</span>,</span><br><span class="line">                <span class="string">&quot;key&quot;</span>: <span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;\ue648&quot;</span>,</span><br><span class="line">                <span class="string">&quot;fontSrc&quot;</span>: <span class="string">&quot;/static/iconfont/iconfont.ttf&quot;</span>,</span><br><span class="line">                <span class="string">&quot;float&quot;</span>: <span class="string">&quot;right&quot;</span>,</span><br><span class="line">                <span class="string">&quot;key&quot;</span>: <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>虽然文章比较长，没有其它的这么简洁，不过使用流程就是这样，如此也方便大家自定义各类图标</li><li>使用方法呢，其实官网都是有的，大家注意还是根据官方的来进行开发</li><li>本文就是做个引导和梳理，办法有很多，大家觉得适用即可</li></ul></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;在使用 &lt;code&gt;uniapp&lt;/code&gt; 开发项目的过程中，图标的使用可以说是日常操作，甚至百分之八十的页面都会用到，而如果使用了 ui 框架的话，框架里面本身也会自带图标，不过这些图标很难满足需求，以下则是阿里图标的使用。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/uni-app/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/tags/uni-app/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://miren123.gitee.io/cljwyh1py00075kwfdkitdgqj/"/>
    <id>https://miren123.gitee.io/cljwyh1py00075kwfdkitdgqj/</id>
    <published>2022-06-09T16:00:00.000Z</published>
    <updated>2022-08-17T15:03:13.871Z</updated>
    
    <content type="html"><![CDATA[<p><span class='p logo center large'>React 开源后台项目</span><span class='p center small logo'>一个基于ThinkPHP6和React的极简后台管理系统</span></p><br><p><a href="https://gitee.com/miren123/mi-admin-react" target="_blank" rel="noopener external nofollow noreferrer">MiAdmin</a> 是一个基于ThinkPHP6和React的极简后台管理系统。只有登录退出、动态路由、权限管理、角色管理、日志管理、接口文档与调试等基础功能；前后台基础框架；你可以在此基础上根据你的业务需求进行开发扩展。前后分离，简单轻量，免费开源，开箱即用。</p><br><span class='btn solid large center'><a class="button" href='https://gitee.com/miren123/mi-admin-react' title='开始使用'><i class='fad fa-flag'></i>开始使用</a></span><br>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;
&lt;span class=&#39;p logo center large&#39;&gt;React 开源后台项目&lt;/span&gt;
&lt;span class=&#39;p center small logo&#39;&gt;一个基于ThinkPHP6和React的极简后台管理系统&lt;/span&gt;
&lt;/p&gt;
&lt;br&gt;

&lt;</summary>
      
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/react/"/>
    
    
  </entry>
  
  <entry>
    <title>Ant Design of React 自定义富文本编辑器</title>
    <link href="https://miren123.gitee.io/cljwyh1q7000m5kwf718ubsog/"/>
    <id>https://miren123.gitee.io/cljwyh1q7000m5kwf718ubsog/</id>
    <published>2022-05-14T16:00:00.000Z</published>
    <updated>2023-06-18T14:36:12.941Z</updated>
    
    <content type="html"><![CDATA[<p>咱们在开发后台的过程当中，用antd的组件时，发现其并没有富文本编辑器这个组件，但是业务又需要咱们去使用，这个时候就得自行封装一个使用的组件。<br>在官方文档的社区精选组件中，就可以找到两个富文本编辑器的组件，本文以及我个人使用的是<code>braft-editor</code>这个组件</p><span id="more"></span><div class="story post-story"><h2 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h2><p><a href="https://braft.margox.cn/demos/basic" target="_blank" rel="noopener external nofollow noreferrer">插件的官方地址：<code>https://braft.margox.cn/demos/basic</code></a></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>使用<strong>npm</strong>或者<strong>yarn</strong>来将本编辑器加入到你的项目中：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用npm安装</span></span><br><span class="line">npm install braft-editor --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用yarn安装</span></span><br><span class="line">yarn add braft-editor</span><br></pre></td></tr></table></figure><blockquote><p>注意：对于传统的scrpt标签引入方式，本项目暂未进行充分测试</p></blockquote><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>编辑器支持<strong>value</strong>和<strong>onChange</strong>属性，这类似于React中原生的input组件。通常情况下，可以用典型的<strong>受控组件</strong>的形式来使用本编辑器：</p><blockquote><p>封装组件，<code>components/Editor</code> 文件夹下创建 <code>index.jsx</code>，内容如下：</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">// 引入编辑器组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BraftEditor</span> <span class="keyword">from</span> <span class="string">&#x27;braft-editor&#x27;</span></span><br><span class="line"><span class="comment">// 引入编辑器样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;braft-editor/dist/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">EditorDemo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="comment">// 创建一个空的editorState作为初始值</span></span><br><span class="line">        <span class="comment">// this.props.content接收父组件的值，渲染富文本</span></span><br><span class="line">        <span class="attr">editorState</span>: <span class="title class_">BraftEditor</span>.<span class="title function_">createEditorState</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">content</span> ?? <span class="literal">null</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleEditorChange = <span class="function">(<span class="params">editorState</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 更新编辑器的状态</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; editorState &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 判断输入的内容，如果有内容，设置输入的内容；如果没有内容，设置为空字符串 &#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (!editorState.<span class="title function_">isEmpty</span>()) &#123; <span class="comment">// 如此判断的原因，因为即使是没有内容 editorState.toHTML() 是一对空标签，不能直接给表单使用。</span></span><br><span class="line">          <span class="comment">// 可直接调用editorState.toHtml()来获取HTML格式的内容</span></span><br><span class="line">          <span class="keyword">const</span> content = editorState.<span class="title function_">toHTML</span>()</span><br><span class="line">          <span class="comment">// 调用父组件的函数，将编辑器输入的内容传递回去</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">setDetails</span>(content)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 调用父组件的函数，没有内容设置成空字符串 &#x27;&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">setDetails</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; editorState &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;my-component&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">BraftEditor</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">value</span>=<span class="string">&#123;editorState&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onChange</span>=<span class="string">&#123;this.handleEditorChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>表单页面使用</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ProForm</span> <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-form&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Modal</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;infoContent&#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/cms&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Editor</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Editor&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Edit</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;isModalVisible, isShowModal, editId&#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [contentData, setContentData] = <span class="title function_">useState</span>(<span class="literal">undefined</span>); <span class="comment">// 富文本数据</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义form的实例</span></span><br><span class="line">  <span class="keyword">const</span> [formObj] = <span class="title class_">ProForm</span>.<span class="title function_">useForm</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> title = editId === <span class="literal">null</span> ? <span class="string">&#x27;添加内容&#x27;</span> : <span class="string">&#x27;编辑内容&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">infoContent</span>(&#123;</span><br><span class="line">      <span class="attr">content_id</span>: editId,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 给编辑器赋值</span></span><br><span class="line">    <span class="title function_">setContentData</span>(res.<span class="property">data</span>.<span class="property">content</span>)</span><br><span class="line">    <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 提交按钮</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleSubmit</span> = <span class="keyword">async</span> values =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> data = values</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通过组件传回来的值，设置组件的值</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">setDetails</span> = content =&gt; formObj.<span class="title function_">setFieldsValue</span>(&#123;<span class="string">&#x27;content&#x27;</span>: content&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&#123;title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">visible</span>=<span class="string">&#123;isModalVisible&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onCancel</span>=<span class="string">&#123;()</span> =&gt;</span> isShowModal(false)&#125;</span></span><br><span class="line"><span class="language-xml">      footer=&#123;null&#125;</span></span><br><span class="line"><span class="language-xml">      destroyOnClose=&#123;true&#125;</span></span><br><span class="line"><span class="language-xml">      width=&#123;750&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">form</span>=<span class="string">&#123;formObj&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onFinish</span>=<span class="string">&#123;values</span> =&gt;</span> handleSubmit(values)&#125;</span></span><br><span class="line"><span class="language-xml">        request=&#123;editId == null ? &#x27;&#x27; : () =&gt; getData()&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProForm.Item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;content&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;详情&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;<span class="attr">required:</span> <span class="attr">true</span>, <span class="attr">message:</span> &#x27;请输入详情&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Editor</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setDetails</span>=<span class="string">&#123;setDetails&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">content</span>=<span class="string">&#123;contentData&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ProForm.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Edit</span>;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li><strong>页面效果</strong><br><img src="https://img-blog.csdnimg.cn/e679be2991a8471c9618dfe5f27b3a22.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/e679be2991a8471c9618dfe5f27b3a22.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></li><li><strong>本文主要是在 <code>Modal</code> 里使用，样式就是默认宽度填充的，如果是在其它场景的话，使用方式是一样的，可以对样式进行简单调整。</strong></li></ul></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;咱们在开发后台的过程当中，用antd的组件时，发现其并没有富文本编辑器这个组件，但是业务又需要咱们去使用，这个时候就得自行封装一个使用的组件。&lt;br&gt;在官方文档的社区精选组件中，就可以找到两个富文本编辑器的组件，本文以及我个人使用的是&lt;code&gt;braft-editor&lt;/code&gt;这个组件&lt;/p&gt;</summary>
    
    
    
    <category term="react" scheme="https://miren123.gitee.io/categories/react/"/>
    
    <category term="Ant-Design" scheme="https://miren123.gitee.io/categories/react/ant-design/"/>
    
    
  </entry>
  
  <entry>
    <title>uniapp中动态底部导航栏tabbar实现，权限管理</title>
    <link href="https://miren123.gitee.io/cljwyh1qj001c5kwffc43a6d2/"/>
    <id>https://miren123.gitee.io/cljwyh1qj001c5kwffc43a6d2/</id>
    <published>2022-04-24T12:12:54.000Z</published>
    <updated>2022-04-24T14:46:20.286Z</updated>
    
    <content type="html"><![CDATA[<p>有时候根据业务的需求，需要实现权限，或者是动态底部的导航栏，这是其中一种实现方法，我自己就用。<br>此方法需要借助uView的自定义导航栏</p><span id="more"></span><h3 id="uniapp中动态tabbar实现"><a href="#uniapp中动态tabbar实现" class="headerlink" title="uniapp中动态tabbar实现"></a>uniapp中动态tabbar实现</h3><p>按照正常的方法引入uView，在需要用到导航栏的页面引入即可。<br>不过page.json里也要正常配置</p><blockquote><p>需要用到的页面</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;view class=&quot;body&quot;&gt;</span><br><span class="line">        &lt;u-tabbar v-model=&quot;current&quot; :before-switch=&quot;beforeSwitch&quot; active-color=&quot;#1d6869&quot; :list=&quot;tabarList&quot;&gt;&lt;/u-tabbar&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123;</span><br><span class="line">        mapState,</span><br><span class="line">        mapMutations</span><br><span class="line">    &#125; from &quot;vuex&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        components: &#123;&#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;&#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            ...mapState([&quot;tabarList&quot;]),</span><br><span class="line">        &#125;,</span><br><span class="line">        onLoad() &#123;&#125;,</span><br><span class="line"></span><br><span class="line">        methods: &#123;</span><br><span class="line">            ...mapMutations([&quot;setTabarList&quot;]),</span><br><span class="line">            beforeSwitch(index) &#123;</span><br><span class="line">                if (this.tabarList[index].text == &quot;客服&quot;) &#123;</span><br><span class="line">                    this.kfshow = true;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><blockquote><p>创建目录utils&#x2F;tabBar.js<br>这是封装权限的目录</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 个人用户</span></span><br><span class="line"><span class="keyword">const</span> member = [&#123;</span><br><span class="line">        <span class="attr">iconPath</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">        <span class="attr">selectedIconPath</span>: <span class="string">&quot;home-fill&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;个人首页&#x27;</span>,</span><br><span class="line">        <span class="attr">customIcon</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&#x27;/pages/index/index&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">iconPath</span>: <span class="string">&quot;account&quot;</span>,</span><br><span class="line">        <span class="attr">selectedIconPath</span>: <span class="string">&quot;account-fill&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;我的&#x27;</span>,</span><br><span class="line">        <span class="attr">isDot</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&#x27;/pages/my/my&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 企业用户</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> firm = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">iconPath</span>: <span class="string">&quot;account&quot;</span>,</span><br><span class="line">        <span class="attr">selectedIconPath</span>: <span class="string">&quot;account-fill&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;企业首页&#x27;</span>,</span><br><span class="line">        <span class="attr">isDot</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&#x27;/pages/enterprise/enterprise&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">iconPath</span>: <span class="string">&quot;account&quot;</span>,</span><br><span class="line">        <span class="attr">selectedIconPath</span>: <span class="string">&quot;account-fill&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;我的&#x27;</span>,</span><br><span class="line">        <span class="attr">isDot</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">pagePath</span>: <span class="string">&#x27;/pages/my/my&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    member,</span><br><span class="line">    firm</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>利用vuex，创建目录store&#x2F;index.js</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;../common/storage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> tabBar <span class="keyword">from</span> <span class="string">&#x27;@/untils/tabBar.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户的类型，也可以根据业务判断具体的权限</span></span><br><span class="line"><span class="keyword">let</span> userInfo = storage.<span class="title function_">getJson</span>(<span class="string">&#x27;userInfo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> type = <span class="string">&#x27;member&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(userInfo != <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">switch</span>(userInfo.<span class="property">utype</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            type = <span class="string">&#x27;member&#x27;</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            type = <span class="string">&#x27;firm&#x27;</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">tabarList</span>: tabBar[type], <span class="comment">// 动态底部导航栏</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">setTabarList</span>(<span class="params">state, list</span>) &#123;</span><br><span class="line">            state.<span class="property">tabarList</span> = list</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><blockquote><p>main.js 配置</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$store</span> = store</span><br></pre></td></tr></table></figure><blockquote><p>封装可以全局调用的方法，在需要的地方调用，实时改变底部导航栏</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&quot;./storage&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> tabBar <span class="keyword">from</span> <span class="string">&#x27;@/untils/tabBar.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">   <span class="title function_">set</span>(<span class="params">name, value</span>) &#123;</span><br><span class="line">      uni.<span class="title function_">setStorageSync</span>(name, value);</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">get</span>(<span class="params">name</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> uni.<span class="title function_">getStorageSync</span>(name);</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">remove</span>(<span class="params">name</span>) &#123;</span><br><span class="line">      uni.<span class="title function_">removeStorageSync</span>(name);</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">      uni.<span class="title function_">clearStorageSync</span>();</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">changeList</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> userInfo = storage.<span class="title function_">getJson</span>(<span class="string">&quot;userInfo&quot;</span>);</span><br><span class="line">      <span class="keyword">let</span> type = <span class="string">&quot;member&quot;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (userInfo != <span class="literal">null</span>) &#123;</span><br><span class="line">         <span class="keyword">switch</span> (userInfo.<span class="property">utype</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;1&quot;</span>:</span><br><span class="line">               type = <span class="string">&quot;member&quot;</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;2&quot;</span>:</span><br><span class="line">               type = <span class="string">&quot;firm&quot;</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      store.<span class="property">state</span>.<span class="property">tabarList</span> = tabBar[type];</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>在登录成功，退出账号，再次登录，或者切换身份等调用</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只调用一次，避免二次渲染，退出登录，清除this.$storage.clear()</span></span><br><span class="line"><span class="keyword">let</span> isTabbar = <span class="variable language_">this</span>.<span class="property">$storage</span>.<span class="title function_">get</span>(<span class="string">&quot;isTabbar&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isTabbar == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$storage</span>.<span class="title function_">set</span>(<span class="string">&quot;isTabbar&quot;</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$storage</span>.<span class="title function_">changeList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;有时候根据业务的需求，需要实现权限，或者是动态底部的导航栏，这是其中一种实现方法，我自己就用。&lt;br&gt;此方法需要借助uView的自定义导航栏&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/uni-app/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/tags/uni-app/"/>
    
    <category term="页面操作" scheme="https://miren123.gitee.io/tags/%E9%A1%B5%E9%9D%A2%E6%93%8D%E4%BD%9C/"/>
    
  </entry>
  
  <entry>
    <title>webstorm设置自定义注释</title>
    <link href="https://miren123.gitee.io/cljwyh1q1000b5kwf69p64dma/"/>
    <id>https://miren123.gitee.io/cljwyh1q1000b5kwf69p64dma/</id>
    <published>2022-04-11T05:30:14.000Z</published>
    <updated>2022-04-24T14:39:38.816Z</updated>
    
    <content type="html"><![CDATA[<p>webstorm功能的强大，就不多做介绍了。<br>在开发过程中总是需要对代码进行一些个性化的注解，这样方便咱们更加有效率的开发</p><span id="more"></span><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>普通的注释</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> <span class="variable">values</span></span></span><br><span class="line"><span class="comment">  */</span></span><br></pre></td></tr></table></figure><blockquote><p>自定义的注释</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 作者：作者的名字</span></span><br><span class="line"><span class="comment">  * 时间：2022/04/18 17:02:59</span></span><br><span class="line"><span class="comment">  * 功能：</span></span><br><span class="line"><span class="comment">  */</span></span><br></pre></td></tr></table></figure><ul><li><p>除此之外，还可以加上一些业务上需要的注释。</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><blockquote><p>设置 → 编辑器 → 实时模板</p></blockquote></li><li><p>点击右侧的加号，选择动态模板</p></li><li><p>缩写，就是快捷键的简写，和打印log的时候一样，输入des再回车即可。</p></li><li><p>在模板文本的下面，有设置使用的文件，大家添加的时候就可以看到。</p></li></ul><p><img src="https://img-blog.csdnimg.cn/e387588cae7646578ad76fb35f59708a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6L-35a6i,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/e387588cae7646578ad76fb35f59708a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6L-35a6i,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><blockquote><p>时间变量的设置</p></blockquote><ul><li>时间变量，需要设置一下，不然数值有点不对。</li></ul><p><img src="https://img-blog.csdnimg.cn/9c1827a6c5684826895400c8c6b4cb9f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6L-35a6i,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/9c1827a6c5684826895400c8c6b4cb9f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6L-35a6i,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>这是2020之后的版本，官方已经有中文插件了，大家可以在插件市场下载安装</li><li>除此之外，还可以定义个性化的注释，也适用于其它的方法注释。</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;webstorm功能的强大，就不多做介绍了。&lt;br&gt;在开发过程中总是需要对代码进行一些个性化的注解，这样方便咱们更加有效率的开发&lt;/p&gt;</summary>
    
    
    
    <category term="工具" scheme="https://miren123.gitee.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="效率开发" scheme="https://miren123.gitee.io/tags/%E6%95%88%E7%8E%87%E5%BC%80%E5%8F%91/"/>
    
    <category term="webstorm" scheme="https://miren123.gitee.io/tags/webstorm/"/>
    
  </entry>
  
  <entry>
    <title>vscode自定义注释</title>
    <link href="https://miren123.gitee.io/cljwyh1pz00095kwfd3k91ts9/"/>
    <id>https://miren123.gitee.io/cljwyh1pz00095kwfd3k91ts9/</id>
    <published>2022-04-09T02:03:14.000Z</published>
    <updated>2022-04-24T14:32:24.461Z</updated>
    
    <content type="html"><![CDATA[<p>vscode作为大家日常开发的工具，我就不多说了。<br>注释的重要性，在开发当中可以说是重中之重，而个性化的自定义注释，则是能够大幅度完善我们的项目开发。</p><span id="more"></span><h3 id="第一步：命令面板"><a href="#第一步：命令面板" class="headerlink" title="第一步：命令面板"></a>第一步：命令面板</h3><ul><li>使用<code>ctrl + shift + p </code>调出如下窗口，并且输入<code>snippets</code></li></ul><p><img src="https://img-blog.csdnimg.cn/8e7aa225430b488fb7a142c0e11192cb.png#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/8e7aa225430b488fb7a142c0e11192cb.png#pic_center" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><h3 id="第二步：json文件编辑"><a href="#第二步：json文件编辑" class="headerlink" title="第二步：json文件编辑"></a>第二步：json文件编辑</h3><ul><li>自定义<code>js</code>注释为例</li></ul><p><img src="https://img-blog.csdnimg.cn/6c07c6bec52a418b819c2e282f5b7dbe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6L-35a6i,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/6c07c6bec52a418b819c2e282f5b7dbe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6L-35a6i,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></p><ul><li>进入到 <code>javascript.json</code> 文件中后，添加如下代码，大家可以自定义设计，保存退出即可，我这里是一个类注释 一个方法注释</li><li>随后大家在方法的上面输入<code>des</code>，即可生成自己想要的注释。</li><li><code>prefix</code> 里的内容可以自定义</li><li><code>php</code>、<code>ts</code>、<code>css</code>等都可以</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;Print to js class&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;prefix&quot;</span>: <span class="string">&quot;des&quot;</span>,</span><br><span class="line">    <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/*&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 作者: 作者&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 时间: $&#123;CURRENT_YEAR&#125;-$&#123;CURRENT_MONTH&#125;-$&#123;CURRENT_DATE&#125; $&#123;CURRENT_HOUR&#125;:$&#123;CURRENT_MINUTE&#125;:$&#123;CURRENT_SECOND&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 功能: $0&quot;</span>,</span><br><span class="line">      <span class="string">&quot; */&quot;</span></span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;Print to js method&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;prefix&quot;</span>: <span class="string">&quot;des&quot;</span>,</span><br><span class="line">    <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/*&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 作者: 作者&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 时间: $&#123;CURRENT_YEAR&#125;-$&#123;CURRENT_MONTH&#125;-$&#123;CURRENT_DATE&#125; $&#123;CURRENT_HOUR&#125;:$&#123;CURRENT_MINUTE&#125;:$&#123;CURRENT_SECOND&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 功能: $0&quot;</span>,</span><br><span class="line">      <span class="string">&quot; */&quot;</span></span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><ul><li>不知道是不是我没有找到，还是版本的问题，我没有找到 <code>jsx</code> 的注释，但是在js里面配置又没有生效。我就试着在全局代码片段里设置了一下，生效了，如果大家没有找到 <code>jsx</code> ，或者是需要自己注释的 <code>json</code> 文件，就全局里配置一下即可。<br><img src="https://img-blog.csdnimg.cn/36479a8ef67e417b81540c6356c2906c.png" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/36479a8ef67e417b81540c6356c2906c.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在这里插入图片描述"></li><li>全局代码片段里的内容如下</li><li>和 <code>js</code> 的没有区别，把 <code>js</code> 改成了 <code>jsx</code></li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;Print to jsx class&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;prefix&quot;</span>: <span class="string">&quot;des&quot;</span>,</span><br><span class="line">    <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/*&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 作者: 作者&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 时间: $&#123;CURRENT_YEAR&#125;-$&#123;CURRENT_MONTH&#125;-$&#123;CURRENT_DATE&#125; $&#123;CURRENT_HOUR&#125;:$&#123;CURRENT_MINUTE&#125;:$&#123;CURRENT_SECOND&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 功能: $0&quot;</span>,</span><br><span class="line">      <span class="string">&quot; */&quot;</span></span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;Print to jsx method&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;prefix&quot;</span>: <span class="string">&quot;des&quot;</span>,</span><br><span class="line">    <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;/*&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 作者: 作者&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 时间: $&#123;CURRENT_YEAR&#125;-$&#123;CURRENT_MONTH&#125;-$&#123;CURRENT_DATE&#125; $&#123;CURRENT_HOUR&#125;:$&#123;CURRENT_MINUTE&#125;:$&#123;CURRENT_SECOND&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot; * 功能: $0&quot;</span>,</span><br><span class="line">      <span class="string">&quot; */&quot;</span></span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;vscode作为大家日常开发的工具，我就不多说了。&lt;br&gt;注释的重要性，在开发当中可以说是重中之重，而个性化的自定义注释，则是能够大幅度完善我们的项目开发。&lt;/p&gt;</summary>
    
    
    
    <category term="工具" scheme="https://miren123.gitee.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="vscode" scheme="https://miren123.gitee.io/tags/vscode/"/>
    
    <category term="效率开发" scheme="https://miren123.gitee.io/tags/%E6%95%88%E7%8E%87%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>古怪学习笔记</title>
    <link href="https://miren123.gitee.io/cljwyh1qs00245kwf0z592db6/"/>
    <id>https://miren123.gitee.io/cljwyh1qs00245kwf0z592db6/</id>
    <published>2021-07-27T10:29:14.000Z</published>
    <updated>2022-08-17T15:03:13.888Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>古怪学习笔记，亲测可用，对于项目开发，提示任务进度，可以提高代码的复用率，笔记中都有比较详细的注释。</p></blockquote><span id="more"></span><h3 id="数据展示"><a href="#数据展示" class="headerlink" title="数据展示"></a>数据展示</h3><h4 id="数据表格展示"><a href="#数据表格展示" class="headerlink" title="数据表格展示"></a>数据表格展示</h4><h5 id="tp中"><a href="#tp中" class="headerlink" title="tp中"></a>tp中</h5><blockquote><p>h5</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;$Think.config.title&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,user-scalable=0,initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;telephone=yes&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">fontSize</span> = (<span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getBoundingClientRect</span>().<span class="property">width</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>) / <span class="number">20</span> + <span class="string">&#x27;px&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">fontSize</span> = (<span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getBoundingClientRect</span>().<span class="property">width</span> ||</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>) / <span class="number">20</span> + <span class="string">&#x27;px&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.layuicdn.com/layui-v2.5.6/css/layui.css&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;layui-table&quot;</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">lay-filter</span>=<span class="string">&quot;list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;__static__/js/jQuery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/layui/2.6.8/layui.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>([<span class="string">&#x27;table&#x27;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> $ = layui.<span class="property">jquery</span>,</span></span><br><span class="line"><span class="language-javascript">            table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript">        tableIn = table.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>: <span class="string">&#x27;#list&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&#x27;&#123;:url(&quot;show&quot;)&#125;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: <span class="string">&#x27;数据表&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">toolbar</span>: <span class="string">&#x27;#toolbar&#x27;</span>, <span class="comment">//开启头部工具栏，并为其绑定左侧模板</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// defaultToolbar: [&#x27;filter&#x27;, &#x27;exports&#x27;, &#x27;print&#x27;, &#123; //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     title: &#x27;提示&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     ,layEvent: &#x27;LAYTABLE_TIPS&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     ,icon: &#x27;layui-icon-tips&#x27; &#125;],</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">defaultToolbar</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cols</span>: [[</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#123;checkbox: true, fixed: true&#125;,</span></span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;id&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;ID&#x27;</span>, <span class="attr">width</span>: <span class="number">80</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">fixed</span>: <span class="literal">true</span>, <span class="attr">sort</span>: <span class="literal">true</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;username&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;名字&#x27;</span>, <span class="attr">width</span>: <span class="number">150</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;wxname&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;微信名&#x27;</span>, <span class="attr">width</span>: <span class="number">150</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;tel&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;电话&#x27;</span>, <span class="attr">width</span>: <span class="number">150</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;score&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;雪球&#x27;</span>, <span class="attr">width</span>: <span class="number">150</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#123;field: &#x27;create_time&#x27;, title: &#x27;创建时间&#x27;, width: 180,templet:&#x27;#create_time&#x27;&#125;,</span></span></span><br><span class="line"><span class="language-javascript">            ]],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limits</span>: [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">50</span>, <span class="number">100</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limit</span>: <span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">page</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>php</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 展示数据表</span></span><br><span class="line"><span class="comment"> * 作者：糜家智</span></span><br><span class="line"><span class="comment"> * 时间：2021/7/13 10:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">isPost</span>()) &#123;</span><br><span class="line">        <span class="variable">$keys</span> = <span class="variable language_">$this</span>-&gt;request-&gt;<span class="title function_ invoke__">post</span>(<span class="string">&#x27;keys&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;trim&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$where</span> = [];</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$keys</span> != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable">$where</span>[] = [<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;like&#x27;</span>, <span class="string">&#x27;%&#x27;</span> . <span class="variable">$keys</span> . <span class="string">&#x27;%&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$page</span> = <span class="variable language_">$this</span>-&gt;request-&gt;<span class="title function_ invoke__">post</span>(<span class="string">&#x27;page&#x27;</span>);</span><br><span class="line">        <span class="variable">$limit</span> = <span class="variable language_">$this</span>-&gt;request-&gt;<span class="title function_ invoke__">post</span>(<span class="string">&#x27;limit&#x27;</span>);</span><br><span class="line">        <span class="variable">$tol</span> = (<span class="variable">$page</span> - <span class="number">1</span>) * <span class="variable">$limit</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$banner</span> = <span class="title function_ invoke__">model</span>(<span class="string">&#x27;user&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>)-&gt;<span class="title function_ invoke__">limit</span>(<span class="variable">$tol</span>, <span class="variable">$limit</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">order</span>(<span class="string">&#x27;score desc&#x27;</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">select</span>();</span><br><span class="line">        <span class="variable">$count</span> = <span class="title function_ invoke__">model</span>(<span class="string">&#x27;user&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>)-&gt;<span class="title function_ invoke__">count</span>();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable">$banner</span>) <span class="title function_ invoke__">error</span>();</span><br><span class="line">        <span class="title function_ invoke__">success</span>(<span class="variable">$banner</span>, <span class="variable">$count</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="原生php"><a href="#原生php" class="headerlink" title="原生php"></a>原生php</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>报名名单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,user-scalable=0,initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;telephone=yes&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.layuicdn.com/layui-v2.5.6/css/layui.css&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.layui-laypage-skip</span>&#123;<span class="attribute">display</span>: block <span class="meta">!important</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.layui-table-page</span>&#123;<span class="attribute">height</span>: <span class="number">118px</span> <span class="meta">!important</span>;<span class="attribute">text-align</span>: center <span class="meta">!important</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#list</span>&#123;<span class="attribute">margin-top</span>: -<span class="number">18px</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.title</span>&#123;<span class="attribute">position</span>: absolute;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">top</span>: <span class="number">4vw</span>;<span class="attribute">z-index</span>: <span class="number">999</span>;<span class="attribute">text-align</span>: center&#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>报名名单<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;layui-table&quot;</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">lay-filter</span>=<span class="string">&quot;list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./js/jQuery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/layui/2.6.8/layui.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>([<span class="string">&#x27;table&#x27;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> $ = layui.<span class="property">jquery</span>,</span></span><br><span class="line"><span class="language-javascript">            table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript">        tableIn = table.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>: <span class="string">&#x27;#list&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&#x27;select.php&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: <span class="string">&#x27;数据表&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">toolbar</span>: <span class="string">&#x27;#toolbar&#x27;</span>, <span class="comment">//开启头部工具栏，并为其绑定左侧模板</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">defaultToolbar</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cols</span>: [[</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;0&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;ID&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">fixed</span>: <span class="literal">true</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;微信名&#x27;</span>, <span class="attr">width</span>: <span class="number">100</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;3&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;名字&#x27;</span>, <span class="attr">width</span>: <span class="number">100</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;4&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;电话&#x27;</span>, <span class="attr">width</span>: <span class="number">120</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;5&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;地址&#x27;</span>, <span class="attr">width</span>: <span class="number">150</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&#x27;7&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;身份证号&#x27;</span>, <span class="attr">width</span>: <span class="number">100</span>,&#125;,</span></span><br><span class="line"><span class="language-javascript">            ]],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limits</span>: [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">50</span>, <span class="number">100</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limit</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">page</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>查询数据的select.php</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/json&#x27;</span>);</span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">&#x27;php/mysql.class.php&#x27;</span>);</span><br><span class="line"><span class="variable">$db</span> = <span class="keyword">new</span> <span class="title class_">Mysql</span>(</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">&#x27;dbhost&#x27;</span> =&gt; <span class="string">&#x27;124.71.68.151&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;dbuser&#x27;</span> =&gt; <span class="string">&#x27;guguan&#x27;</span>,<span class="comment">//用户名</span></span><br><span class="line">        <span class="string">&#x27;dbpsw&#x27;</span> =&gt; <span class="string">&#x27;guguan2021.&#x27;</span>,<span class="comment">//数据库密码</span></span><br><span class="line">        <span class="string">&#x27;dbname&#x27;</span> =&gt; <span class="string">&#x27;guguan&#x27;</span>,<span class="comment">//数据库名字</span></span><br><span class="line">        <span class="string">&#x27;dbcharset&#x27;</span> =&gt; <span class="string">&#x27;utf8mb4&#x27;</span><span class="comment">//字符集</span></span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"><span class="variable">$table</span> = <span class="string">&#x27;ty_20210709_user&#x27;</span>;</span><br><span class="line"><span class="variable">$page</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line"><span class="variable">$limit</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;limit&#x27;</span>];</span><br><span class="line"><span class="variable">$tol</span> = (<span class="variable">$page</span> - <span class="number">1</span>) * <span class="variable">$limit</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$find</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">findAll</span>(<span class="string">&quot;select * from <span class="subst">$table</span> limit <span class="subst">$tol</span>,<span class="subst">$limit</span>&quot;</span>);</span><br><span class="line">    <span class="variable">$count</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">findOne</span>(<span class="string">&#x27;select count(id) from &#x27;</span>.<span class="variable">$table</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>([<span class="string">&quot;code&quot;</span> =&gt; <span class="number">0</span>, <span class="string">&quot;data&quot;</span> =&gt; <span class="variable">$find</span>, <span class="string">&quot;count&quot;</span> =&gt; <span class="variable">$count</span>[<span class="number">0</span>]]);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="排行榜展示"><a href="#排行榜展示" class="headerlink" title="排行榜展示"></a>排行榜展示</h4><blockquote><p>简单模拟，效果没问题</p></blockquote><p>引入js：<code>&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/iScroll/5.2.0/iscroll-infinite.min.js&quot; defer&gt;&lt;/script&gt;</code></p><h5 id="ajax初次加载"><a href="#ajax初次加载" class="headerlink" title="ajax初次加载"></a>ajax初次加载</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">scrollData = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> myScroll = <span class="keyword">new</span> <span class="title class_">IScroll</span>(<span class="string">&quot;#wrapper&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">scrollbars</span>: <span class="literal">false</span>,<span class="comment">//有滚动条</span></span><br><span class="line">      <span class="attr">mouseWheel</span>: <span class="literal">false</span>,<span class="comment">//允许滑轮滚动</span></span><br><span class="line">      <span class="attr">interactiveScrollbars</span>: <span class="literal">true</span>,<span class="comment">//滚动条可以拖动</span></span><br><span class="line">      <span class="attr">scrollY</span>: <span class="literal">true</span>,<span class="comment">//纵向滚动条可以使用</span></span><br><span class="line">      <span class="attr">freeScroll</span>: <span class="literal">true</span>,<span class="comment">//既有上下又有左右（自由滚动）</span></span><br><span class="line">      <span class="attr">probeType</span>: <span class="number">1</span>,<span class="comment">//对性能没有影响。在滚动事件被触发时，滚动轴是不是忙着做它的东西。</span></span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//开始滚动时触发的事件</span></span><br><span class="line">   myScroll.<span class="title function_">on</span>(<span class="string">&quot;scrollStart&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">rankData</span>()</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rankData = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   loading = weui.<span class="title function_">loading</span>(<span class="string">&#x27;loading...&#x27;</span>);</span><br><span class="line"></span><br><span class="line">   $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">      <span class="attr">url</span>: actionRoot + <span class="string">&#x27;get_rank&#x27;</span>,</span><br><span class="line">      <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">         <span class="attr">page</span>: page</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//请求成功</span></span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> data = res.<span class="property">data</span>;</span><br><span class="line">            <span class="keyword">var</span> limit = (page - <span class="number">1</span>) * <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">               <span class="keyword">var</span> value = i + limit + <span class="number">1</span>;</span><br><span class="line">               <span class="keyword">var</span> num = value;</span><br><span class="line">                </span><br><span class="line">               <span class="keyword">if</span> (value === <span class="number">1</span>)&#123;</span><br><span class="line">                  num = <span class="string">&#x27;&lt;img class=&quot;rank-img&quot; src=&quot;&#x27;</span>+sources_root+<span class="string">&#x27;img/rank1.png&quot;&gt;&#x27;</span>;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">if</span> (value === <span class="number">2</span>)&#123;</span><br><span class="line">                  num = <span class="string">&#x27;&lt;img class=&quot;rank-img&quot; src=&quot;&#x27;</span>+sources_root+<span class="string">&#x27;img/rank2.png&quot;&gt;&#x27;</span>;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">if</span> (value === <span class="number">3</span>)&#123;</span><br><span class="line">                  num = <span class="string">&#x27;&lt;img class=&quot;rank-img&quot; src=&quot;&#x27;</span>+sources_root+<span class="string">&#x27;img/rank3.png&quot;&gt;&#x27;</span>;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               $(<span class="string">`&lt;div class=&quot;rank-c&quot;&gt;</span></span><br><span class="line"><span class="string">                       &lt;div class=&quot;rank-one&quot;&gt;<span class="subst">$&#123;num&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                       &lt;div&gt;&lt;img class=&quot;rank-head&quot; src=&quot;<span class="subst">$&#123;data[i].wxhead&#125;</span>&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                       &lt;div class=&quot;wx-name&quot;&gt;<span class="subst">$&#123;data[i].wxname&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                       &lt;div class=&quot;grade&quot;&gt;<span class="subst">$&#123;data[i].score&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                   &lt;/div&gt;`</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;#wrapper&quot;</span>))</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            loading.<span class="title function_">hide</span>();</span><br><span class="line">            $(<span class="string">&quot;.ranking&quot;</span>).<span class="title function_">show</span>()</span><br><span class="line">            page++;</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mui.<span class="title function_">toast</span>(res.<span class="property">msg</span>, &#123;<span class="attr">duration</span>: <span class="string">&#x27;1000&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;div&#x27;</span>&#125;)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//请求失败，包含具体的错误信息</span></span><br><span class="line">      <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.pageh0-4-2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title function_">rankData</span>()</span><br><span class="line">   <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">scrollData</span>()</span><br><span class="line">   &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="ajax二次加载"><a href="#ajax二次加载" class="headerlink" title="ajax二次加载"></a>ajax二次加载</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myScroll = <span class="keyword">new</span> <span class="title class_">IScroll</span>(<span class="string">&quot;#wrapper&quot;</span>, &#123;</span><br><span class="line">   <span class="attr">scrollbars</span>: <span class="literal">false</span>,<span class="comment">//有滚动条</span></span><br><span class="line">   <span class="attr">mouseWheel</span>: <span class="literal">false</span>,<span class="comment">//允许滑轮滚动</span></span><br><span class="line">   <span class="attr">interactiveScrollbars</span>: <span class="literal">true</span>,<span class="comment">//滚动条可以拖动</span></span><br><span class="line">   <span class="attr">scrollY</span>: <span class="literal">true</span>,<span class="comment">//纵向滚动条可以使用</span></span><br><span class="line">   <span class="attr">freeScroll</span>: <span class="literal">true</span>,<span class="comment">//既有上下又有左右（自由滚动）</span></span><br><span class="line">   <span class="attr">probeType</span>: <span class="number">1</span>,<span class="comment">//对性能没有影响。在滚动事件被触发时，滚动轴是不是忙着做它的东西。</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> page = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//开始滚动时触发的事件</span></span><br><span class="line">myScroll.<span class="title function_">on</span>(<span class="string">&quot;scrollStart&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   loading = weui.<span class="title function_">loading</span>(<span class="string">&#x27;loading...&#x27;</span>);</span><br><span class="line"></span><br><span class="line">   $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">       <span class="attr">url</span>: actionRoot + <span class="string">&#x27;get_rank&#x27;</span>,</span><br><span class="line">       <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">       <span class="attr">data</span>: &#123;</span><br><span class="line">           <span class="attr">page</span>: page</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="comment">//请求成功</span></span><br><span class="line">       <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">1</span>) &#123;</span><br><span class="line">               <span class="keyword">var</span> data = res.<span class="property">data</span>;</span><br><span class="line">               <span class="keyword">var</span> limit = (page - <span class="number">1</span>) * <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                   $(<span class="string">`&lt;div class=&quot;rank-c&quot;&gt;</span></span><br><span class="line"><span class="string">                       &lt;div class=&quot;rank-one&quot;&gt;<span class="subst">$&#123;i + limit + <span class="number">1</span>&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                       &lt;div&gt;&lt;img class=&quot;rank-head&quot; src=&quot;<span class="subst">$&#123;data[i].wxhead&#125;</span>&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                       &lt;div class=&quot;wx-name&quot;&gt;<span class="subst">$&#123;data[i].wxname&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                       &lt;div&gt;<span class="subst">$&#123;data[i].score&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                   &lt;/div&gt;`</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;#wrapper&quot;</span>))</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               loading.<span class="title function_">hide</span>();</span><br><span class="line">               page++;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               mui.<span class="title function_">toast</span>(res.<span class="property">msg</span>, &#123;<span class="attr">duration</span>: <span class="string">&#x27;1000&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;div&#x27;</span>&#125;)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line"></span><br><span class="line">       <span class="comment">//请求失败，包含具体的错误信息</span></span><br><span class="line">       <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="页面和样式"><a href="#页面和样式" class="headerlink" title="页面和样式"></a>页面和样式</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ranking&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;__static__/img/rank.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;rankimg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank-table&quot;</span> <span class="attr">id</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &#123;volist name=&quot;rank&quot; id=&quot;vo&quot; key=&quot;k&quot;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank-c&quot;</span>&gt;</span></span><br><span class="line">            &#123;if condition=&quot;$k eq 1&quot;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank-one&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rank-img&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;__static__/img/rank1.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;elseif condition=&quot;$k eq 2&quot;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank-one&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rank-img&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;__static__/img/rank2.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;elseif condition=&quot;$k eq 3&quot;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank-one&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rank-img&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;__static__/img/rank3.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;else/&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank-one&quot;</span>&gt;</span>&#123;$k&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;/if&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rank-head&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;$vo.wxhead&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wx-name&quot;</span>&gt;</span>&#123;$vo.wxname&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;$vo.score&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;/volist&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.ranking</span>&#123;<span class="attribute">position</span>: absolute;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">height</span>: <span class="number">100%</span>;<span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.7</span>);&#125;</span><br><span class="line"><span class="selector-class">.rankimg</span>&#123;<span class="attribute">width</span>: <span class="number">80vw</span>;<span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">50%</span>;<span class="attribute">top</span>: <span class="number">50%</span>;<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);&#125;</span><br><span class="line"><span class="selector-class">.close</span>&#123;<span class="attribute">position</span>: absolute;<span class="attribute">width</span>: <span class="number">5vw</span>;<span class="attribute">height</span>: <span class="number">5vw</span>;<span class="attribute">left</span>: <span class="number">50%</span>;<span class="attribute">top</span>: <span class="number">50%</span>;<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">710%</span>, -<span class="number">1172%</span>);&#125;</span><br><span class="line"><span class="selector-class">.rank-table</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;<span class="attribute">width</span>: <span class="number">65vw</span>;<span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">50%</span>;<span class="attribute">top</span>: <span class="number">50%</span>;<span class="attribute">height</span>: <span class="number">102vw</span>;<span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">overflow-y</span>: scroll;<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">47%</span>);<span class="attribute">display</span>: flex;<span class="attribute">flex-direction</span>: column;justify-items: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rank-c</span>&#123;<span class="attribute">margin-top</span>: <span class="number">2vw</span>;<span class="attribute">display</span>: flex;<span class="attribute">flex-direction</span>: row;justify-items: center;<span class="attribute">align-items</span>: center;<span class="attribute">justify-content</span>: space-around;&#125;</span><br><span class="line"><span class="selector-class">.wx-name</span>&#123;<span class="attribute">width</span>: <span class="number">30%</span>;<span class="attribute">white-space</span>: nowrap;<span class="attribute">overflow</span>: hidden;<span class="attribute">text-overflow</span>: ellipsis;&#125;</span><br><span class="line"><span class="selector-class">.rank-head</span>&#123;<span class="attribute">width</span>: <span class="number">9vw</span>;<span class="attribute">height</span>: <span class="number">9vw</span>;<span class="attribute">border-radius</span>: <span class="number">100%</span>;<span class="attribute">position</span>: sticky <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-class">.rank-img</span>&#123;<span class="attribute">width</span>: <span class="number">4vw</span>;<span class="attribute">margin-left</span>: -<span class="number">1vw</span>;<span class="attribute">margin-top</span>: -<span class="number">1vw</span>;&#125;</span><br><span class="line"><span class="selector-class">.rank-one</span>&#123;<span class="attribute">width</span>: <span class="number">4vw</span>;<span class="attribute">height</span>: <span class="number">4vw</span>;<span class="attribute">text-align</span>: left&#125;</span><br></pre></td></tr></table></figure><p><strong>图片资源</strong><br><img src="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank.png" class="lazyload" data-srcset="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="rank"><br><img src="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank1.png" class="lazyload" data-srcset="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="rank1"><img src="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank2.png" class="lazyload" data-srcset="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank2.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="rank2"><img src="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank3.png" class="lazyload" data-srcset="%E5%9B%BE%E7%89%87/%E5%8F%A4%E6%80%AA.assets/rank3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="rank3"></p><h3 id="页面显示"><a href="#页面显示" class="headerlink" title="页面显示"></a>页面显示</h3><h4 id="分享弹窗"><a href="#分享弹窗" class="headerlink" title="分享弹窗"></a>分享弹窗</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;share&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none;position:absolute;height: 100%;width: 100%;background-color: rgba(0,0,0,0.6)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">&quot;width: 94%;left: 3%&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;__static__/img/share_alert.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">a-eff</span>=<span class="string">&quot;bounceInUp&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">a-fun</span>=<span class="string">&quot;&quot;</span> <span class="attr">a-dur</span>=<span class="string">&quot;1s&quot;</span> <span class="attr">a-del</span>=<span class="string">&quot;1s&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.share&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;.share&quot;</span>).<span class="title function_">hide</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="助力"><a href="#助力" class="headerlink" title="助力"></a>助力</h3><h4 id="分享助力"><a href="#分享助力" class="headerlink" title="分享助力"></a>分享助力</h4><blockquote><p>引入js </p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;__static__/js/wxshares.js?v=2&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>main.js</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getCount = <span class="keyword">function</span>(<span class="params">type, isCom, callback</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   <span class="keyword">if</span> (!isCom) &#123;</span><br><span class="line">      isCom = <span class="literal">null</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (!type) &#123;</span><br><span class="line">      type = <span class="literal">null</span></span><br><span class="line">   &#125;</span><br><span class="line">   loading = weui.<span class="title function_">loading</span>(<span class="string">&#x27;loading...&#x27;</span>);</span><br><span class="line">   $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">async</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">         <span class="string">&#x27;type&#x27;</span>: type,</span><br><span class="line">         <span class="string">&#x27;isCom&#x27;</span>: isCom</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">url</span>: actionRoot + <span class="string">&#x27;getDrawcount&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">msg</span>)</span><br><span class="line">         loading.<span class="title function_">hide</span>();</span><br><span class="line">         <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            weui.<span class="title function_">alert</span>(<span class="string">&#x27;恭喜您获得一次额外游戏机会！&#x27;</span>)</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>wxshares.js 中找到对应方法</strong></p><h3 id="数据提交"><a href="#数据提交" class="headerlink" title="数据提交"></a>数据提交</h3><h4 id="用户信息提交"><a href="#用户信息提交" class="headerlink" title="用户信息提交"></a>用户信息提交</h4><blockquote><p>适用于弹窗为一整张图片，输入框、关闭和提交按钮覆盖图片</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        填写用户信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info popover&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info-con&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;close-info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 19.8vw&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tel&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;__static__/img/info-bg.png&quot;</span> <span class="attr">btn</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;info-bg ani&quot;</span> <span class="attr">a-eff</span>=<span class="string">&quot;zoomIn&quot;</span> <span class="attr">a-fun</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">a-dur</span>=<span class="string">&quot;1s&quot;</span> <span class="attr">a-del</span>=<span class="string">&quot;0.5s&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub-info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.info-con</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">50%</span>;<span class="attribute">top</span>: <span class="number">35%</span>;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.info-bg</span>&#123;<span class="attribute">width</span>: <span class="number">80%</span>;<span class="attribute">left</span>: <span class="number">10%</span>;&#125;</span><br><span class="line"><span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;<span class="attribute">margin-left</span>: <span class="number">54%</span>;<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">32%</span>;<span class="attribute">margin-top</span>: <span class="number">8.7vw</span>;<span class="attribute">position</span>: absolute;<span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">5vw</span>;<span class="attribute">background-color</span>: transparent;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">2vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.close-info</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">83%</span>;<span class="attribute">top</span>: <span class="number">2vw</span>;<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4vw</span>;<span class="attribute">height</span>: <span class="number">4vw</span>;<span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sub-info</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">50%</span>;<span class="attribute">top</span>: <span class="number">33vw</span>;<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">27vw</span>;<span class="attribute">height</span>: <span class="number">10vw</span>;<span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>关闭弹窗</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;.close-info&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   $(<span class="string">&quot;.info&quot;</span>).<span class="title function_">hide</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>提交信息</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//提交信息</span></span><br><span class="line">$(<span class="string">&quot;.sub-info&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">let</span> name = $(<span class="string">&quot;input[name=&#x27;username&#x27;]&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">   <span class="keyword">let</span> tel = $(<span class="string">&quot;input[name=&#x27;tel&#x27;]&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">   <span class="keyword">if</span> (name == <span class="string">&quot;&quot;</span> || tel == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> weui.<span class="title function_">alert</span>(<span class="string">&quot;请填写完整信息&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (!<span class="title function_">checkMobile</span>(tel)) &#123;</span><br><span class="line">      <span class="keyword">return</span> weui.<span class="title function_">alert</span>(<span class="string">&quot;请填写正确的手机号&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   loading = weui.<span class="title function_">loading</span>(<span class="string">&quot;loading...&quot;</span>);</span><br><span class="line">   $.<span class="title function_">post</span>(</span><br><span class="line">      actionRoot + <span class="string">&quot;putinfo&quot;</span>, &#123;</span><br><span class="line">         <span class="attr">username</span>: name,</span><br><span class="line">         <span class="attr">tel</span>: tel,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">         loading.<span class="title function_">hide</span>();</span><br><span class="line">         <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            weui.<span class="title function_">alert</span>(<span class="string">&quot;信息提交成功！&quot;</span>);</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            weui.<span class="title function_">alert</span>(res.<span class="property">msg</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         $(<span class="string">&quot;.info&quot;</span>).<span class="title function_">hide</span>();</span><br><span class="line">      &#125;, <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 提交信息</span></span><br><span class="line"><span class="comment"> * 作者：糜家智</span></span><br><span class="line"><span class="comment"> * 时间：2021/7/21 15:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">putInfo</span>(<span class="params">Request <span class="variable">$request</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$find</span> = <span class="title function_ invoke__">model</span>(<span class="string">&#x27;User&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;openid&#x27;</span>, <span class="variable">$this</span>-&gt;openid)-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$find</span>) <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">error</span>(<span class="string">&#x27;网络错误&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$find</span>[<span class="string">&#x27;tel&#x27;</span>]) &#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">success</span>(<span class="string">&#x27;已经提交过了，无需重复！&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$username</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">post</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">    <span class="variable">$tel</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">post</span>(<span class="string">&#x27;tel&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$insert_data</span> = [</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span> =&gt; <span class="variable">$username</span>,</span><br><span class="line">        <span class="string">&#x27;tel&#x27;</span> =&gt; <span class="variable">$tel</span>,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$res</span> = <span class="title function_ invoke__">model</span>(<span class="string">&#x27;User&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;openid&#x27;</span>, <span class="variable">$this</span>-&gt;openid)-&gt;<span class="title function_ invoke__">update</span>(<span class="variable">$insert_data</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$res</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&#x27;code&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;msg&#x27;</span> =&gt; <span class="string">&#x27;信息提交成功！&#x27;</span>, <span class="string">&#x27;data&#x27;</span> =&gt; [<span class="string">&#x27;wxname&#x27;</span> =&gt; <span class="variable language_">$this</span>-&gt;wxname, <span class="string">&#x27;openid&#x27;</span> =&gt; <span class="variable language_">$this</span>-&gt;openid, <span class="string">&#x27;wxhead&#x27;</span> =&gt; <span class="variable language_">$this</span>-&gt;wxhead]];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">error</span>(<span class="string">&#x27;网络错误，请稍后再试&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkMobile</span>(<span class="params">str</span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> myreg = <span class="regexp">/^[1][3,4,5,7,8,9][0-9]&#123;9&#125;$/</span>;</span><br><span class="line">   <span class="keyword">if</span> (!myreg.<span class="title function_">test</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="weui下拉选择"><a href="#weui下拉选择" class="headerlink" title="weui下拉选择"></a>weui下拉选择</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dataArr = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line">$(<span class="string">&quot;.address&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    weui.<span class="title function_">picker</span>(dataArr, &#123;</span><br><span class="line">        <span class="attr">defaultValue</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 这里是value</span></span><br><span class="line">        <span class="attr">onChange</span>: <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">onConfirm</span>: <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">            $(<span class="string">&quot;input[name=&#x27;address&#x27;]&quot;</span>).<span class="title function_">val</span>(result[<span class="number">0</span>].<span class="property">value</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;search_xqpicker&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;古怪学习笔记，亲测可用，对于项目开发，提示任务进度，可以提高代码的复用率，笔记中都有比较详细的注释。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="古怪" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/%E5%8F%A4%E6%80%AA/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="开发" scheme="https://miren123.gitee.io/tags/%E5%BC%80%E5%8F%91/"/>
    
    <category term="javascript" scheme="https://miren123.gitee.io/tags/javascript/"/>
    
    <category term="古怪学习" scheme="https://miren123.gitee.io/tags/%E5%8F%A4%E6%80%AA%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>程序员多款软件推荐分享</title>
    <link href="https://miren123.gitee.io/cljwyh1q3000f5kwfe80ucwwi/"/>
    <id>https://miren123.gitee.io/cljwyh1q3000f5kwfe80ucwwi/</id>
    <published>2021-07-25T07:03:14.000Z</published>
    <updated>2021-07-25T07:54:07.439Z</updated>
    
    <content type="html"><![CDATA[<p>工欲善其事，必先利其器。对于程序员来说需要的“器”太多了，如今各种同类型的软件都有很多种，但是否都是“利器”呢，等你一个一个装好去试简直就是麻烦。这里直接给还在寻找“利器”的程序员推荐几款必备的辅助软件工具。</p><span id="more"></span><h3 id="Snipaste-截图-贴图工具"><a href="#Snipaste-截图-贴图工具" class="headerlink" title="Snipaste 截图+贴图工具"></a>Snipaste 截图+贴图工具</h3><p>官方主页：<a href="https://zh.snipaste.com/" target="_blank" rel="noopener external nofollow noreferrer">https://zh.snipaste.com/</a><br>介绍：Snipaste 是一个简单但强大的截图工具，也可以让你将截图贴回到屏幕上！<br>贴图功能非常好用，尤其是对于单屏显示的程序猿们，再也不用按Alt+Tab来回切换屏幕了</p><p>（偷偷告诉你：用Snipaste 辅助写博客也非常方便哦！：）</p><p>价格：免费</p><h3 id="Notepad"><a href="#Notepad" class="headerlink" title="Notepad++"></a>Notepad++</h3><p>官方主页：<a href="https://notepad-plus-plus.org/" target="_blank" rel="noopener external nofollow noreferrer">https://notepad-plus-plus.org/</a><br>介绍：Notepad++用来查看源码文件极其方便，用它你就可以不用打开那庞大的工程而直接查看文件的代码。相比使用记事本查看，Notepad++有代码高亮显示，非常适合查看部分工程源码。</p><p>价格：免费</p><h3 id="Everything"><a href="#Everything" class="headerlink" title="Everything"></a>Everything</h3><p>官方主页：<a href="https://www.voidtools.com/zh-cn/" target="_blank" rel="noopener external nofollow noreferrer">https://www.voidtools.com/zh-cn/</a><br>介绍：快速查找电脑中的文件（非常快），相比Window自带的文件检索框，Everything就是降维打击，简直神器！</p><p>flux屏幕色温调节</p><p>介绍：调节屏幕色温，缓解眼部疲劳，对于天天盯着惨白电脑的人着实是个小福利。<br>官网地址：<a href="https://justgetflux.com/" target="_blank" rel="noopener external nofollow noreferrer">https://justgetflux.com/</a><br>价格：免费</p><h3 id="福析阅读器"><a href="#福析阅读器" class="headerlink" title="福析阅读器"></a>福析阅读器</h3><p>官网地址：<a href="https://www.foxitsoftware.cn/" target="_blank" rel="noopener external nofollow noreferrer">https://www.foxitsoftware.cn/</a><br>介绍：做软硬件开发的，总是少不了要看一些官方等等的说明文档以及一些pdf格式的原理图，用自带的浏览器看原理图时总是不好移动，而福析阅读器就能很好的胜任这份工作，并且也可以调节为暗色模式哦 (￣▽￣)ブ<br>价格：普通功能免费，高级功能收费，对于普通用户来说，免费的就够用了</p><h3 id="BeyondCompare-代码差异对比工具"><a href="#BeyondCompare-代码差异对比工具" class="headerlink" title="BeyondCompare 代码差异对比工具"></a>BeyondCompare 代码差异对比工具</h3><p>官网地址：<a href="https://www.scootersoftware.com/" target="_blank" rel="noopener external nofollow noreferrer">https://www.scootersoftware.com/</a><br>介绍：<br>使用BeyondCompare您可以快速轻松地比较文件和文件夹。通过使用简单，功能强大的命令，您可以专注于您感兴趣的差异，而忽略那些您不需要的差异。然后，您可以合并更改，同步文件并生成报告以作记录。<br>你可以不使用，但你一定要知道。有时候看学习视频时，对比着人家提供的工程文件，和自己敲的代码和人家的代码明明“一毛一样”，但是自己的就是报错，而你又找不出来，编译器还定位不到错误位置。光靠眼睛去看还不得累死，这时候，导入这两份文件，一个对比，哪里不同清清楚楚，要多爽有多爽。</p><p>价格：收费</p><h3 id="坚果云"><a href="#坚果云" class="headerlink" title="坚果云"></a>坚果云</h3><p>官网地址：<a href="https://www.jianguoyun.com/" target="_blank" rel="noopener external nofollow noreferrer">https://www.jianguoyun.com/</a></p><p>介绍：实现多设备之间文件同步共享，适合多台电脑办公的，时时工程同步文件到另一台电脑（设备），下班后打开工程就可以继续快乐的干活了，下载速度看个人网速，杠杠的，再也不要5k的速度了。♪(∇*)</p><p>价格：普通用户每月最多可上传1GB文件，下载3GB文件。（上传一点工程文件对俺来说还是够用的）</p><h3 id="WOX"><a href="#WOX" class="headerlink" title="WOX"></a>WOX</h3><p>你可以将 Wox 看作一个高效的本地快速搜索框，通过快捷键呼出，然后输入关键字来搜索程序进行快速启动，或者搜索本地硬盘的文件，打开百度、Google 进行搜索，甚至是通过一些插件的功能实现单词翻译、关闭屏幕、查询剪贴板历史、查询编程文档、查询天气等更多功能。<br>官网下载地址：<a href="http://www.wox.one/" target="_blank" rel="noopener external nofollow noreferrer">http://www.wox.one/</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;工欲善其事，必先利其器。对于程序员来说需要的“器”太多了，如今各种同类型的软件都有很多种，但是否都是“利器”呢，等你一个一个装好去试简直就是麻烦。这里直接给还在寻找“利器”的程序员推荐几款必备的辅助软件工具。&lt;/p&gt;</summary>
    
    
    
    <category term="生活" scheme="https://miren123.gitee.io/categories/%E7%94%9F%E6%B4%BB/"/>
    
    <category term="必备软件" scheme="https://miren123.gitee.io/categories/%E7%94%9F%E6%B4%BB/%E5%BF%85%E5%A4%87%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="软件" scheme="https://miren123.gitee.io/tags/%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="windows" scheme="https://miren123.gitee.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>vue框架篇</title>
    <link href="https://miren123.gitee.io/cljwyh1qq001v5kwf4imugvnu/"/>
    <id>https://miren123.gitee.io/cljwyh1qq001v5kwf4imugvnu/</id>
    <published>2021-07-06T02:14:14.000Z</published>
    <updated>2022-08-17T15:03:13.878Z</updated>
    
    <content type="html"><![CDATA[<p>本文以前端面试官的角度出发，对 Vue 框架中一些重要的特性、框架的原理以问题的形式进行整理汇总，意在帮助作者及读者自测下 Vue 掌握的程度。</p><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文以前端面试官的角度出发，对 Vue 框架中一些重要的特性、框架的原理以问题的形式进行整理汇总，意在帮助作者及读者自测下 Vue 掌握的程度。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/vue/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="https://miren123.gitee.io/tags/vue/"/>
    
    <category term="指南" scheme="https://miren123.gitee.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>scroll-view双向联动</title>
    <link href="https://miren123.gitee.io/cljwyh1qt00265kwf5n1p27br/"/>
    <id>https://miren123.gitee.io/cljwyh1qt00265kwf5n1p27br/</id>
    <published>2021-07-01T02:14:14.000Z</published>
    <updated>2022-08-17T15:03:13.881Z</updated>
    
    <content type="html"><![CDATA[<p>scroll-view的双向联动，主要应用场景为分类菜单，点击左边分类右边自动滑动到对应的分类菜单下，滑动右边分类列表的同时，左边的分类菜单也会同时滑动</p><span id="more"></span><blockquote><p>在得到分类数据的时候，首先得到整个分类列表的高度</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.$nextTick(() =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        this.setScrollHeight();</span><br><span class="line">    &#125;, 1500);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">setScrollHeight() &#123;</span><br><span class="line">    let h = 0;</span><br><span class="line">    const query = uni.createSelectorQuery();</span><br><span class="line">    query.selectAll(&#x27;.goods-item&#x27;).boundingClientRect().exec((res) =&gt; &#123;</span><br><span class="line">        res[0].forEach((item) =&gt; &#123;</span><br><span class="line">            h += item.height;</span><br><span class="line">            this.goodsHeight.push(h);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    this.menuHeight = [];</span><br><span class="line">    let m = 0;</span><br><span class="line">    query.select(&quot;.cu-item&quot;).boundingClientRect().exec((res) =&gt; &#123;</span><br><span class="line">        res[0].forEach((item) =&gt; &#123;</span><br><span class="line">            m += item.height;</span><br><span class="line">            this.menuHeight.push(m);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>右边联动</p></blockquote><p>scroll-view中的属性<code>:scroll-into-view=&quot;&#39;main-&#39;+mainCur&quot;</code>，和标题的<code>:id=&quot;&#39;main-&#39;+index&quot;</code>进行相对应的关联；点击左边菜单赋值给<code>mainCur</code>即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TabSelect(e) &#123;</span><br><span class="line">    this.tabCur = e.currentTarget.dataset.id;</span><br><span class="line">    this.mainCur = e.currentTarget.dataset.id;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><blockquote><p>左边联动，重点</p></blockquote><p>上面已经获取到菜单和分类页的高度，根据高度来对菜单加值，减值，实现左边联动滑动的效果<br>右边<code>scroll-view</code>中属性<code>@scroll=&quot;VerticalMain&quot;</code>可监听<code>scroll-view</code>滚动</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">VerticalMain(e) &#123;</span><br><span class="line"></span><br><span class="line">    if (this.goodsHeight.length == 0) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let scrollTop = e.detail.scrollTop + 10;</span><br><span class="line">    let current = this.tabCur;</span><br><span class="line">    </span><br><span class="line">    if (scrollTop &gt;= this.verticalNavTop) &#123;</span><br><span class="line">        if (current + 1 &lt; this.goodsHeight.length &amp;&amp; scrollTop &gt;= this.goodsHeight[current]) &#123;</span><br><span class="line">            this.tabCur = current + 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        if (current - 1 &gt;= 0 &amp;&amp; scrollTop &lt; this.goodsHeight[current - 1]) &#123;</span><br><span class="line">            this.tabCur = current - 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    this.verticalNavTop = scrollTop;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>优点</strong>：如果得到的分类数据标题没有id值，可根据此方法来<br><strong>缺点</strong>：代码量比用id来进行赋值多了一些，根据得到的接口数据来使用</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;scroll-view的双向联动，主要应用场景为分类菜单，点击左边分类右边自动滑动到对应的分类菜单下，滑动右边分类列表的同时，左边的分类菜单也会同时滑动&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/categories/%E5%89%8D%E7%AB%AF/uni-app/"/>
    
    
    <category term="前端" scheme="https://miren123.gitee.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="uni-app" scheme="https://miren123.gitee.io/tags/uni-app/"/>
    
    <category term="页面操作" scheme="https://miren123.gitee.io/tags/%E9%A1%B5%E9%9D%A2%E6%93%8D%E4%BD%9C/"/>
    
  </entry>
  
</feed>
